<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>ТекстЗапроса</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>СебестоимостьПоТипуЦен</dataPath>
			<field>СебестоимостьПоТипуЦен</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Стоимость по типу цен</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗапасНаПродажу</dataPath>
			<field>ЗапасНаПродажу</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Запас на продажу, мес.</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=3</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контрагент</dataPath>
			<field>Контрагент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Контрагенты</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Подразделение</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.ПодразделенияКомпании</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГруппаТоваров</dataPath>
			<field>ГруппаТоваров</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группа товаров</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Организации</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Себестоимость</dataPath>
			<field>Себестоимость</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Себестоимость</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Партия</dataPath>
			<field>Партия</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СкладКомпании</dataPath>
			<field>СкладКомпании</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.СкладыКомпании</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоляСебестоимости</dataPath>
			<field>ДоляСебестоимости</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Доля себестоимости, %</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоМесяцевБезПродаж</dataPath>
			<field>КоличествоМесяцевБезПродаж</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество месяцев без продаж</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<role>
				<dcscom:periodNumber>1</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Номенклатура</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоляВАссортименте</dataPath>
			<field>ДоляВАссортименте</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Доля в ассортименте</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=2</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТекущийРасход</dataPath>
			<field>ТекущийРасход</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущий расход</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>0</v8:Digits>
					<v8:FractionDigits>0</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ЧЦ=15; ЧДЦ=8</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МинимальнаяШирина</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">14</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта</dataPath>
			<field>Валюта</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Валюта</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Валюты</v8:Type>
			</valueType>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ОстаткиПоСкладу.СкладКомпании КАК СкладКомпании,
	ОстаткиПоСкладу.СуммаОстаток КАК ОбщСумма,
	ОстаткиПоСкладу.КоличествоОстаток КАК ОбщКоличПоКаталогу
ПОМЕСТИТЬ ТабРасчетаДолей
ИЗ
	РегистрНакопления.ПартииТоваровКомпании.Остатки(&amp;КонецПериода, ) КАК ОстаткиПоСкладу
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаОстатков.Контрагент КАК Контрагент,
	ТаблицаОстатков.Организация КАК Организация,
	ТаблицаОстатков.Подразделение КАК Подразделение,
	ТаблицаОстатков.СкладКомпании КАК СкладКомпании,
	ТаблицаОстатков.Номенклатура КАК Номенклатура,
	ВЫБОР
		КОГДА СУММА(ТаблицаОстатков.Оборот) &gt; 0
			ТОГДА 2
		КОГДА СУММА(ТаблицаОстатков.НачальныйЗапас) = 0
			ТОГДА 2
		ИНАЧЕ 1
	КОНЕЦ КАК ГруппаТоваров,
	СУММА(ТаблицаОстатков.Сумма) КАК Себестоимость,
	СУММА(ТаблицаОстатков.СуммаУпр) КАК СебестоимостьУпр,
	СУММА(ТаблицаОстатков.НачальныйЗапас) КАК НачальныйЗапас,
	СУММА(ТаблицаОстатков.НачальныйЗапас2) КАК НачальныйЗапас2,
	СУММА(ТаблицаОстатков.Оборот) КАК ОборотПродаж,
	СУММА(ТаблицаОстатков.Оборот2) КАК ОборотПродаж2,
	СУММА(ТаблицаОстатков.КонечныйЗапас) КАК КонечныйЗапас
ПОМЕСТИТЬ ТабНеликвидовИКандидатов
ИЗ
	(ВЫБРАТЬ
		Остатки.Партия.Контрагент КАК Контрагент,
		Остатки.СкладКомпании.Организация КАК Организация,
		Остатки.СкладКомпании.ПодразделениеКомпании КАК Подразделение,
		Остатки.СкладКомпании КАК СкладКомпании,
		Остатки.Номенклатура КАК Номенклатура,
		0 КАК Сумма,
		0 КАК СуммаУпр,
		Остатки.КоличествоОстаток КАК НачальныйЗапас,
		0 КАК НачальныйЗапас2,
		0 КАК Оборот,
		0 КАК Оборот2,
		0 КАК КонечныйЗапас
	ИЗ
		РегистрНакопления.ПартииТоваровКомпании.Остатки(&amp;ДатаНеликвидов, {(Номенклатура).* КАК Номенклатура, (СкладКомпании).* КАК СкладКомпании, (Партия).* КАК Партия, (Партия.Контрагент).* КАК Контрагент, (СкладКомпании.ПодразделениеКомпании).* КАК Подразделение, (СкладКомпании.Организация).* КАК Организация}) КАК Остатки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		Остатки.Партия.Контрагент,
		Остатки.СкладКомпании.Организация,
		Остатки.СкладКомпании.ПодразделениеКомпании,
		Остатки.СкладКомпании,
		Остатки.Номенклатура,
		0,
		0,
		ВЫБОР
			КОГДА Остатки.Партия = &amp;ПартияТоваровОтрицательныхОстатков
				ТОГДА 0
			КОГДА Остатки.Партия.Дата &lt;= &amp;ДатаНеликвидов
				ТОГДА Остатки.КоличествоОстаток
			ИНАЧЕ 0
		КОНЕЦ,
		Остатки.КоличествоОстаток,
		0,
		0,
		0
	ИЗ
		РегистрНакопления.ПартииТоваровКомпании.Остатки(&amp;ДатаПретендентов, {(Номенклатура).* КАК Номенклатура, (СкладКомпании).* КАК СкладКомпании, (Партия).* КАК Партия, (Партия.Контрагент).* КАК Контрагент, (СкладКомпании.ПодразделениеКомпании).* КАК Подразделение, (СкладКомпании.Организация).* КАК Организация}) КАК Остатки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		Остатки.Партия.Контрагент,
		Остатки.СкладКомпании.Организация,
		Остатки.СкладКомпании.ПодразделениеКомпании,
		Остатки.СкладКомпании,
		Остатки.Номенклатура,
		Остатки.СуммаОстаток,
		Остатки.СуммаУпрОстаток,
		0,
		0,
		0,
		0,
		Остатки.КоличествоОстаток
	ИЗ
		РегистрНакопления.ПартииТоваровКомпании.Остатки(&amp;КонецПериода, {(Номенклатура).* КАК Номенклатура, (СкладКомпании).* КАК СкладКомпании, (Партия).* КАК Партия, (Партия.Контрагент).* КАК Контрагент, (СкладКомпании.ПодразделениеКомпании).* КАК Подразделение, (СкладКомпании.Организация).* КАК Организация}) КАК Остатки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ПартииТоваровКомпании.Партия.Контрагент,
		ПартииТоваровКомпании.СкладКомпании.Организация,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании,
		ПартииТоваровКомпании.СкладКомпании,
		ПартииТоваровКомпании.Номенклатура,
		0,
		0,
		0,
		0,
		СУММА(ПартииТоваровКомпании.Количество),
		0,
		0
	ИЗ
		РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
	ГДЕ
		ПартииТоваровКомпании.Период &gt;= &amp;ДатаНеликвидов
		И ПартииТоваровКомпании.Период &lt; &amp;ДатаПретендентов
		И ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
		И НЕ ПартииТоваровКомпании.Регистратор ССЫЛКА Документ.ПеремещениеТоваров
	{ГДЕ
		ПартииТоваровКомпании.Номенклатура.* КАК Номенклатура,
		ПартииТоваровКомпании.СкладКомпании.* КАК СкладКомпании,
		ПартииТоваровКомпании.Партия.* КАК Партия,
		ПартииТоваровКомпании.Партия.Контрагент.* КАК Контрагент,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании.* КАК Подразделение,
		ПартииТоваровКомпании.СкладКомпании.Организация.* КАК Организация}
	
	СГРУППИРОВАТЬ ПО
		ПартииТоваровКомпании.Партия.Контрагент,
		ПартииТоваровКомпании.СкладКомпании,
		ПартииТоваровКомпании.Номенклатура,
		ПартииТоваровКомпании.СкладКомпании.Организация,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании
	
	ИМЕЮЩИЕ
		СУММА(ПартииТоваровКомпании.Количество) &gt; 0
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ПартииТоваровКомпании.Партия.Контрагент,
		ПартииТоваровКомпании.СкладКомпании.Организация,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании,
		ПартииТоваровКомпании.СкладКомпании,
		ПартииТоваровКомпании.Номенклатура,
		0,
		0,
		0,
		0,
		0,
		СУММА(ВЫБОР
				КОГДА ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
					ТОГДА ПартииТоваровКомпании.Количество
				ИНАЧЕ -ПартииТоваровКомпании.Количество
			КОНЕЦ),
		0
	ИЗ
		РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
	ГДЕ
		ПартииТоваровКомпании.Период &gt;= &amp;ДатаПретендентов
		И ПартииТоваровКомпании.Период &lt;= &amp;КонецПериода
		И (ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)
				ИЛИ ПартииТоваровКомпании.Регистратор ССЫЛКА Документ.ИзвлечениеТоваровИзПроизводства
					И ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход))
		И НЕ ПартииТоваровКомпании.Регистратор ССЫЛКА Документ.ПеремещениеТоваров
	{ГДЕ
		ПартииТоваровКомпании.Номенклатура.* КАК Номенклатура,
		ПартииТоваровКомпании.СкладКомпании.* КАК СкладКомпании,
		ПартииТоваровКомпании.Партия.* КАК Партия,
		ПартииТоваровКомпании.Партия.Контрагент.* КАК Контрагент,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании.* КАК Подразделение,
		ПартииТоваровКомпании.СкладКомпании.Организация.* КАК Организация}
	
	СГРУППИРОВАТЬ ПО
		ПартииТоваровКомпании.Партия.Контрагент,
		ПартииТоваровКомпании.СкладКомпании.Организация,
		ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании,
		ПартииТоваровКомпании.СкладКомпании,
		ПартииТоваровКомпании.Номенклатура
	
	ИМЕЮЩИЕ
		СУММА(ПартииТоваровКомпании.Количество) &gt; 0) КАК ТаблицаОстатков

СГРУППИРОВАТЬ ПО
	ТаблицаОстатков.Контрагент,
	ТаблицаОстатков.Организация,
	ТаблицаОстатков.Подразделение,
	ТаблицаОстатков.СкладКомпании,
	ТаблицаОстатков.Номенклатура

ИМЕЮЩИЕ
	СУММА(ТаблицаОстатков.НачальныйЗапас2) &gt; 0 И
	СУММА(ТаблицаОстатков.Оборот2) = 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТабНеликвидовИКандидатов.Номенклатура КАК Номенклатура,
	Цены.Период КАК Период,
	Цены.Цена КАК Цена
ПОМЕСТИТЬ ТаблицаЦен
ИЗ
	ТабНеликвидовИКандидатов КАК ТабНеликвидовИКандидатов
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.Цены КАК Цены
		ПО ТабНеликвидовИКандидатов.Номенклатура = Цены.Номенклатура
			И (Цены.Период &lt;= &amp;КонецПериода)
			И (Цены.ТипЦен = &amp;ТипЦены)
			И (Цены.ПодразделениеКомпании = &amp;ТекПодразделение)
			И (Цены.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка))
			И (Цены.ХарактеристикаНоменклатуры = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка))
			И (Цены.ЕдиницаИзмерения = ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка))
ГДЕ
	Цены.Период &lt;= &amp;КонецПериода

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаЦен.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ТаблицаЦен.Период) КАК Период
ПОМЕСТИТЬ СрезПоследних
ИЗ
	ТаблицаЦен КАК ТаблицаЦен

СГРУППИРОВАТЬ ПО
	ТаблицаЦен.Номенклатура

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СрезПоследних.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ТаблицаЦен.Цена) КАК Цена
ПОМЕСТИТЬ ЦеныПодразделения
ИЗ
	СрезПоследних КАК СрезПоследних
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаЦен КАК ТаблицаЦен
		ПО СрезПоследних.Номенклатура = ТаблицаЦен.Номенклатура
			И СрезПоследних.Период = ТаблицаЦен.Период

СГРУППИРОВАТЬ ПО
	СрезПоследних.Номенклатура

ИМЕЮЩИЕ
	МАКСИМУМ(ТаблицаЦен.Цена) &gt; 0

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ СрезПоследних
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ТаблицаЦен
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТабНеликвидовИКандидатов.Номенклатура КАК Номенклатура,
	Цены.Период КАК Период,
	Цены.Цена КАК Цена
ПОМЕСТИТЬ ТаблицаЦенДляВсейКомпании
ИЗ
	ТабНеликвидовИКандидатов КАК ТабНеликвидовИКандидатов
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.Цены КАК Цены
		ПО ТабНеликвидовИКандидатов.Номенклатура = Цены.Номенклатура
			И (Цены.Период &lt;= &amp;КонецПериода)
			И (Цены.ТипЦен = &amp;ТипЦены)
			И (Цены.ПодразделениеКомпании = &amp;ВсяКомпания)
			И (Цены.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка))
			И (Цены.ХарактеристикаНоменклатуры = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка))
			И (Цены.ЕдиницаИзмерения = ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка))
ГДЕ
	Цены.Период &lt;= &amp;КонецПериода

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТаблицаЦен.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ТаблицаЦен.Период) КАК Период
ПОМЕСТИТЬ СрезПоследнихДляВсейКомпании
ИЗ
	ТаблицаЦенДляВсейКомпании КАК ТаблицаЦен

СГРУППИРОВАТЬ ПО
	ТаблицаЦен.Номенклатура

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СрезПоследних.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ТаблицаЦен.Цена) КАК Цена
ПОМЕСТИТЬ ЦеныДляВсейКомпании
ИЗ
	СрезПоследнихДляВсейКомпании КАК СрезПоследних
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ТаблицаЦенДляВсейКомпании КАК ТаблицаЦен
		ПО СрезПоследних.Номенклатура = ТаблицаЦен.Номенклатура
			И СрезПоследних.Период = ТаблицаЦен.Период

СГРУППИРОВАТЬ ПО
	СрезПоследних.Номенклатура

ИМЕЮЩИЕ
	МАКСИМУМ(ТаблицаЦен.Цена) &gt; 0

ИНДЕКСИРОВАТЬ ПО
	Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ СрезПоследнихДляВсейКомпании
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ТаблицаЦенДляВсейКомпании
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТабРасхода.Контрагент КАК Контрагент,
	ТабРасхода.Организация КАК Организация,
	ТабРасхода.Подразделение КАК Подразделение,
	ТабРасхода.СкладКомпании КАК СкладКомпании,
	ТабРасхода.Номенклатура КАК Номенклатура,
	НАЧАЛОПЕРИОДА(ПартииТоваровКомпании.Период, МЕСЯЦ) КАК Период,
	СУММА(ПартииТоваровКомпании.Количество) КАК Количество
ПОМЕСТИТЬ ТаблицаРасхода
ИЗ
	ТабНеликвидовИКандидатов КАК ТабРасхода
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
		ПО ТабРасхода.Номенклатура = ПартииТоваровКомпании.Номенклатура
			И (ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход))
			И (НЕ ПартииТоваровКомпании.Регистратор ССЫЛКА Документ.ПеремещениеТоваров)
			И (ПартииТоваровКомпании.Период &lt;= &amp;КонецПериода)
			И ТабРасхода.Контрагент = ПартииТоваровКомпании.Партия.Контрагент
			И ТабРасхода.Организация = ПартииТоваровКомпании.СкладКомпании.Организация
			И ТабРасхода.СкладКомпании = ПартииТоваровКомпании.СкладКомпании
			И ТабРасхода.Подразделение = ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании
ГДЕ
	ПартииТоваровКомпании.Период &lt;= &amp;КонецПериода
{ГДЕ
	ПартииТоваровКомпании.Номенклатура.* КАК Номенклатура,
	ПартииТоваровКомпании.СкладКомпании.* КАК СкладКомпании,
	ПартииТоваровКомпании.Партия.* КАК Партия,
	ПартииТоваровКомпании.Партия.Контрагент.* КАК Контрагент,
	ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании.* КАК Подразделение,
	ПартииТоваровКомпании.СкладКомпании.Организация.* КАК Организация}

СГРУППИРОВАТЬ ПО
	ТабРасхода.Контрагент,
	ТабРасхода.Организация,
	ТабРасхода.Подразделение,
	ТабРасхода.СкладКомпании,
	ТабРасхода.Номенклатура,
	НАЧАЛОПЕРИОДА(ПартииТоваровКомпании.Период, МЕСЯЦ)

ИМЕЮЩИЕ
	СУММА(ПартииТоваровКомпании.Количество) &lt;&gt; 0
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТабПрихода.Контрагент КАК Контрагент,
	ТабПрихода.Организация КАК Организация,
	ТабПрихода.Подразделение КАК Подразделение,
	ТабПрихода.СкладКомпании КАК СкладКомпании,
	ТабПрихода.Номенклатура КАК Номенклатура,
	МИНИМУМ(НАЧАЛОПЕРИОДА(ВЫБОР
				КОГДА ПартииТоваровКомпании.Партия = &amp;ПартияТоваровОтрицательныхОстатков
					ТОГДА ПартииТоваровКомпании.Период
				ИНАЧЕ ПартииТоваровКомпании.Партия.Дата
			КОНЕЦ, МЕСЯЦ)) КАК Период,
	РАЗНОСТЬДАТ(МИНИМУМ(НАЧАЛОПЕРИОДА(ВЫБОР
					КОГДА ПартииТоваровКомпании.Партия = &amp;ПартияТоваровОтрицательныхОстатков
						ТОГДА ПартииТоваровКомпании.Период
					ИНАЧЕ ПартииТоваровКомпании.Партия.Дата
				КОНЕЦ, МЕСЯЦ)), &amp;КонецПериода, МЕСЯЦ) КАК КоличествоМесяцевБезПродаж
ПОМЕСТИТЬ ТаблицаПодсчетДнейБезПродаж
ИЗ
	ТабНеликвидовИКандидатов КАК ТабПрихода
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.ПартииТоваровКомпании КАК ПартииТоваровКомпании
		ПО ТабПрихода.Номенклатура = ПартииТоваровКомпании.Номенклатура
			И (ПартииТоваровКомпании.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход))
			И (ПартииТоваровКомпании.Период &lt;= &amp;КонецПериода)
			И ТабПрихода.Контрагент = ПартииТоваровКомпании.Партия.Контрагент
			И ТабПрихода.Организация = ПартииТоваровКомпании.СкладКомпании.Организация
			И ТабПрихода.СкладКомпании = ПартииТоваровКомпании.СкладКомпании
			И ТабПрихода.Подразделение = ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании
		ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаРасхода КАК ТабРасхода
		ПО ТабПрихода.Номенклатура = ТабРасхода.Номенклатура
			И ТабПрихода.Контрагент = ТабРасхода.Контрагент
			И ТабПрихода.Организация = ТабРасхода.Организация
			И ТабПрихода.СкладКомпании = ТабРасхода.СкладКомпании
			И ТабПрихода.Подразделение = ТабРасхода.Подразделение
ГДЕ
	ТабРасхода.Период ЕСТЬ NULL
{ГДЕ
	ПартииТоваровКомпании.Номенклатура.* КАК Номенклатура,
	ПартииТоваровКомпании.СкладКомпании.* КАК СкладКомпании,
	ПартииТоваровКомпании.Партия.* КАК Партия,
	ПартииТоваровКомпании.Партия.Контрагент.* КАК Контрагент,
	ПартииТоваровКомпании.СкладКомпании.ПодразделениеКомпании.* КАК Подразделение,
	ПартииТоваровКомпании.СкладКомпании.Организация.* КАК Организация}

СГРУППИРОВАТЬ ПО
	ТабПрихода.Контрагент,
	ТабПрихода.Организация,
	ТабПрихода.Подразделение,
	ТабПрихода.СкладКомпании,
	ТабПрихода.Номенклатура

ИМЕЮЩИЕ
	СУММА(ПартииТоваровКомпании.Количество) &lt;&gt; 0

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТаблицаРасхода.Контрагент,
	ТаблицаРасхода.Организация,
	ТаблицаРасхода.Подразделение,
	ТаблицаРасхода.СкладКомпании,
	ТаблицаРасхода.Номенклатура,
	МАКСИМУМ(ТаблицаРасхода.Период),
	РАЗНОСТЬДАТ(МАКСИМУМ(ТаблицаРасхода.Период), &amp;КонецПериода, МЕСЯЦ)
ИЗ
	ТаблицаРасхода КАК ТаблицаРасхода

СГРУППИРОВАТЬ ПО
	ТаблицаРасхода.Контрагент,
	ТаблицаРасхода.Организация,
	ТаблицаРасхода.Подразделение,
	ТаблицаРасхода.СкладКомпании,
	ТаблицаРасхода.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ТаблицаПодсчетДнейБезПродаж.Контрагент КАК Контрагент,
	ТаблицаПодсчетДнейБезПродаж.Организация КАК Организация,
	ТаблицаПодсчетДнейБезПродаж.Подразделение КАК Подразделение,
	ТаблицаПодсчетДнейБезПродаж.СкладКомпании КАК СкладКомпании,
	ТаблицаПодсчетДнейБезПродаж.Номенклатура КАК Номенклатура,
	МАКСИМУМ(ТаблицаПодсчетДнейБезПродаж.КоличествоМесяцевБезПродаж) КАК КоличествоМесяцевБезПродаж,
	СУММА(ЕСТЬNULL(ТаблицаРасходов.Количество, 0)) / &amp;КоличествоМесяцевДляРасчета КАК ТекущийРасход
ПОМЕСТИТЬ ТаблицаПрошлыхПродаж
ИЗ
	ТаблицаПодсчетДнейБезПродаж КАК ТаблицаПодсчетДнейБезПродаж
		ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаРасхода КАК ТаблицаРасходов
		ПО ТаблицаПодсчетДнейБезПродаж.Номенклатура = ТаблицаРасходов.Номенклатура
			И ТаблицаПодсчетДнейБезПродаж.Период &gt;= ТаблицаРасходов.Период
			И (РАЗНОСТЬДАТ(ТаблицаРасходов.Период, ТаблицаПодсчетДнейБезПродаж.Период, МЕСЯЦ) &lt; &amp;КоличествоМесяцевДляРасчета)
			И ТаблицаПодсчетДнейБезПродаж.Контрагент = ТаблицаРасходов.Контрагент
			И ТаблицаПодсчетДнейБезПродаж.Организация = ТаблицаРасходов.Организация
			И ТаблицаПодсчетДнейБезПродаж.СкладКомпании = ТаблицаРасходов.СкладКомпании
			И ТаблицаПодсчетДнейБезПродаж.Подразделение = ТаблицаРасходов.Подразделение

СГРУППИРОВАТЬ ПО
	ТаблицаПодсчетДнейБезПродаж.Контрагент,
	ТаблицаПодсчетДнейБезПродаж.Организация,
	ТаблицаПодсчетДнейБезПродаж.Подразделение,
	ТаблицаПодсчетДнейБезПродаж.СкладКомпании,
	ТаблицаПодсчетДнейБезПродаж.Номенклатура
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ТаблицаПодсчетДнейБезПродаж
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ТаблицаРасхода
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТабНеликвидовИКандидатов.Контрагент КАК Контрагент,
	ТабНеликвидовИКандидатов.Организация КАК Организация,
	ТабНеликвидовИКандидатов.Подразделение КАК Подразделение,
	ТабНеликвидовИКандидатов.СкладКомпании КАК СкладКомпании,
	ТабНеликвидовИКандидатов.Номенклатура КАК Номенклатура,
	ВЫБОР
		КОГДА ТабНеликвидовИКандидатов.ГруппаТоваров = 1
			ТОГДА "Неликвидные товары"
		ИНАЧЕ "Претенденты в неликвидные товары"
	КОНЕЦ КАК ГруппаТоваров,
	ТабНеликвидовИКандидатов.Себестоимость КАК Себестоимость,
	ТабНеликвидовИКандидатов.СебестоимостьУпр КАК СебестоимостьУпр,
	ТабНеликвидовИКандидатов.КонечныйЗапас КАК Количество,
	ТабНеликвидовИКандидатов.КонечныйЗапас * ЕСТЬNULL(ЦеныПодразделения.Цена, ЕСТЬNULL(ЦеныДляВсейКомпании.Цена, 0)) КАК СебестоимостьПоТипуЦен,
	ТабРасчетаДолей.ОбщКоличПоКаталогу КАК ОбщКоличПоКаталогу,
	ЕСТЬNULL(ТаблицаПрошлыхПродаж.КоличествоМесяцевБезПродаж, 0) КАК КоличествоМесяцевБезПродаж,
	ЕСТЬNULL(ТаблицаПрошлыхПродаж.ТекущийРасход, 0) КАК ТекущийРасход,
	ВЫБОР
		КОГДА ВЫРАЗИТЬ(&amp;ТипЦены КАК Справочник.ТипыЦен).ВВалютеУчета
			ТОГДА ТабНеликвидовИКандидатов.Номенклатура.ВалютаУчета
		ИНАЧЕ ВЫРАЗИТЬ(&amp;ТипЦены КАК Справочник.ТипыЦен).ВалютаЦены
	КОНЕЦ КАК Валюта,
	ВЫБОР
		КОГДА ТаблицаПрошлыхПродаж.ТекущийРасход ЕСТЬ NULL
				ИЛИ ТаблицаПрошлыхПродаж.ТекущийРасход = 0
			ТОГДА 0
		ИНАЧЕ ТабНеликвидовИКандидатов.КонечныйЗапас / ТаблицаПрошлыхПродаж.ТекущийРасход
	КОНЕЦ КАК ЗапасНаПродажу,
	ВЫБОР
		КОГДА ТабРасчетаДолей.ОбщСумма ЕСТЬ NULL
				ИЛИ ТабРасчетаДолей.ОбщСумма = 0
			ТОГДА 0
		ИНАЧЕ ЕСТЬNULL(ТабНеликвидовИКандидатов.Себестоимость, 0) / ТабРасчетаДолей.ОбщСумма * 100
	КОНЕЦ КАК ДоляСебестоимости,
	ВЫБОР
		КОГДА ТабРасчетаДолей.ОбщКоличПоКаталогу ЕСТЬ NULL
				ИЛИ ТабРасчетаДолей.ОбщКоличПоКаталогу = 0
			ТОГДА 100
		ИНАЧЕ ТабНеликвидовИКандидатов.КонечныйЗапас / ТабРасчетаДолей.ОбщКоличПоКаталогу * 100
	КОНЕЦ КАК ДоляВАссортименте
{ВЫБРАТЬ
	Контрагент.* КАК Контрагент,
	Организация.* КАК Организация,
	Подразделение.* КАК Подразделение,
	СкладКомпании.* КАК СкладКомпании,
	Номенклатура.* КАК Номенклатура,
	Количество КАК Количество,
	Себестоимость КАК Себестоимость,
	ЗапасНаПродажу КАК ЗапасНаПродажу,
	КоличествоМесяцевБезПродаж КАК КоличествоМесяцевБезПродаж,
	СебестоимостьПоТипуЦен КАК СебестоимостьПоТипуЦен,
	ДоляВАссортименте КАК ДоляВАссортименте,
	ДоляСебестоимости КАК ДоляСебестоимости,
	Валюта КАК Валюта,
	ТекущийРасход КАК ТекущийРасход,
	ГруппаТоваров КАК ГруппаТоваров}
ИЗ
	ТабНеликвидовИКандидатов КАК ТабНеликвидовИКандидатов
		{ЛЕВОЕ СОЕДИНЕНИЕ ТабРасчетаДолей КАК ТабРасчетаДолей
		ПО (ТабРасчетаДолей.СкладКомпании = ТабНеликвидовИКандидатов.СкладКомпании)}
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныПодразделения КАК ЦеныПодразделения
		ПО ТабНеликвидовИКандидатов.Номенклатура = ЦеныПодразделения.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныДляВсейКомпании КАК ЦеныДляВсейКомпании
		ПО ТабНеликвидовИКандидатов.Номенклатура = ЦеныДляВсейКомпании.Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ ТаблицаПрошлыхПродаж КАК ТаблицаПрошлыхПродаж
		ПО ТабНеликвидовИКандидатов.Номенклатура = ТаблицаПрошлыхПродаж.Номенклатура
			И ТабНеликвидовИКандидатов.Контрагент = ТаблицаПрошлыхПродаж.Контрагент
			И ТабНеликвидовИКандидатов.Организация = ТаблицаПрошлыхПродаж.Организация
			И ТабНеликвидовИКандидатов.СкладКомпании = ТаблицаПрошлыхПродаж.СкладКомпании
			И ТабНеликвидовИКандидатов.Подразделение = ТаблицаПрошлыхПродаж.Подразделение
ГДЕ
	ВЫБОР
			КОГДА ТабНеликвидовИКандидатов.КонечныйЗапас ЕСТЬ NULL
					ИЛИ ТабНеликвидовИКандидатов.КонечныйЗапас = 0
				ТОГДА ЛОЖЬ
			КОГДА ТабНеликвидовИКандидатов.ГруппаТоваров = 1
				ТОГДА ИСТИНА
			КОГДА ТаблицаПрошлыхПродаж.ТекущийРасход ЕСТЬ NULL
					ИЛИ ТаблицаПрошлыхПродаж.ТекущийРасход = 0
				ТОГДА ИСТИНА
			ИНАЧЕ ТабНеликвидовИКандидатов.КонечныйЗапас / ТаблицаПрошлыхПродаж.ТекущийРасход &gt;= &amp;КритичныйЗапас
		КОНЕЦ
{ГДЕ
	ТабНеликвидовИКандидатов.Номенклатура.* КАК Номенклатура}</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<totalField>
		<dataPath>Количество</dataPath>
		<expression>Сумма(Количество)</expression>
	</totalField>
	<totalField>
		<dataPath>Себестоимость</dataPath>
		<expression>Сумма(Себестоимость)</expression>
	</totalField>
	<totalField>
		<dataPath>ЗапасНаПродажу</dataPath>
		<expression>Среднее(ЗапасНаПродажу)</expression>
	</totalField>
	<totalField>
		<dataPath>КоличествоМесяцевБезПродаж</dataPath>
		<expression>Среднее(КоличествоМесяцевБезПродаж)</expression>
	</totalField>
	<totalField>
		<dataPath>СебестоимостьПоТипуЦен</dataPath>
		<expression>ВЫБОР
				КОГДА Номенклатура ЕСТЬ NULL ТОГДА
					0
				ИНАЧЕ
					СУММА(СебестоимостьПоТипуЦен)
КОНЕЦ
</expression>
	</totalField>
	<totalField>
		<dataPath>ДоляСебестоимости</dataPath>
		<expression>ВЫБОР
		КОГДА СкладКомпании ЕСТЬ NULL ТОГДА
		0
		ИНАЧЕ
			СУММА(ДоляСебестоимости)/Количество(Различные СкладКомпании)
	КОНЕЦ</expression>
		<group>ГруппаТоваров</group>
		<group>Номенклатура</group>
		<group>СкладКомпании</group>
	</totalField>
	<totalField>
		<dataPath>Валюта</dataPath>
		<expression>Максимум(Валюта)</expression>
	</totalField>
	<totalField>
		<dataPath>ТекущийРасход</dataPath>
		<expression>		ВЫБОР
			КОГДА Номенклатура ЕСТЬ NULL ТОГДА
				0
			ИНАЧЕ
			СУММА(ТекущийРасход)
КОНЕЦ
</expression>
		<group>Номенклатура</group>
	</totalField>
	<totalField>
		<dataPath>ДоляВАссортименте</dataPath>
		<expression>ВЫБОР
			КОГДА СкладКомпании ЕСТЬ NULL ТОГДА
				0
			ИНАЧЕ
				СУММА(ДоляВАссортименте)/Количество(Различные СкладКомпании)
		КОНЕЦ </expression>
		<group>ГруппаТоваров</group>
		<group>Номенклатура</group>
		<group>СкладКомпании</group>
	</totalField>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ВсяКомпания</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Вся компания</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПодразделенияКомпании</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ПодразделенияКомпании.ОсновноеПодразделение</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ДатаНеликвидов</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Неликвид после</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ДатаПретендентов</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Претендент после</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КритичныйЗапас</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Критичный запас (в мес.)</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>10</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
		<value xsi:type="xs:decimal">0</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КоличествоДнейДляРасчетаТекущегоРасхода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Интервал расхода (в днях)</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
		<value xsi:type="xs:decimal">0</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<denyIncompleteValues>true</denyIncompleteValues>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>КоличествоМесяцевДляРасчета</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Количество месяцев для расчета</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
		<value xsi:type="xs:decimal">0</value>
		<useRestriction>true</useRestriction>
		<expression>ВЫБОР КОГДА &amp;КоличествоДнейДляРасчетаТекущегоРасхода &lt; 30 ТОГДА 1 ИНАЧЕ &amp;КоличествоДнейДляРасчетаТекущегоРасхода / 30 Конец</expression>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ПартияТоваровОтрицательныхОстатков</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Партия товаров отрицательных остатков</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:DocumentRef.ПоступлениеТоваров</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ТипЦены</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Тип цен</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ТипыЦен</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ТипыЦен.ОсновнойТипЦенПродажи</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ТекПодразделение</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Подразделение для цены</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ПодразделенияКомпании</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Анализ неликвидов запчастей</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Количество</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Себестоимость</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:use>false</dcsset:use>
					<dcsset:field>СебестоимостьПоТипуЦен</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:use>false</dcsset:use>
					<dcsset:field>Валюта</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЗапасНаПродажу</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ТекущийРасход</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоляСебестоимости</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоляВАссортименте</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:use>false</dcsset:use>
					<dcsset:field>КоличествоМесяцевБезПродаж</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">СкладКомпании</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Контрагент</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Подразделение</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Партия</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>КонецПериода</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ВсяКомпания</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DesignTimeValue">Справочник.ПодразделенияКомпании.ОсновноеПодразделение</dcscor:value>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ДатаНеликвидов</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ДатаПретендентов</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>КритичныйЗапас</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">0</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>КоличествоДнейДляРасчетаТекущегоРасхода</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ПартияТоваровОтрицательныхОстатков</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ТипЦены</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DesignTimeValue">Справочник.ТипыЦен.ОсновнойТипЦенПродажи</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ТекПодразделение</dcscor:parameter>
					<dcscor:value xsi:type="xs:decimal">0</dcscor:value>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>СкладКомпании</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>ГруппаТоваров</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item>
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>Номенклатура</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
						</dcsset:item>
					</dcsset:item>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>