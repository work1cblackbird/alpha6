#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Стандартная процедура настройки схемы компоновщика данных
//
// Параметры:
//  ФормаОтчета - УправляемаФорма - Форма отчета, в которой возникло событие.
//
Процедура ПриИзмененииНастроек(ФормаОтчета) Экспорт
	
	ПартияТоваровОтрицательныхОстатков = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ПартияТоваровОтрицательныхОстатков"));
	Если НЕ ЗначениеЗаполнено(ПартияТоваровОтрицательныхОстатков.Значение) Тогда
		ПартияТоваровОтрицательныхОстатков.Значение = Константы.ПартияТоваровОтрицательныхОстатков.Получить();
	КонецЕсли;
	
	ТекПодразделение = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ТекПодразделение"));
	Если НЕ ЗначениеЗаполнено(ТекПодразделение.Значение) Тогда
		ТекПодразделение.Значение = ПараметрыСеанса.ПодразделениеКомпании;
	КонецЕсли;
	
	Если ФормаОтчета.КлючТекущегоВарианта = "Основной" Тогда
		
		КритичныйЗапас = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("КритичныйЗапас"));
		Если НЕ ЗначениеЗаполнено(КритичныйЗапас.Значение) Тогда
			КритичныйЗапас.Значение = 8;
		КонецЕсли;
		
		КоличествоДнейДляРасчетаТекущегоРасхода = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("КоличествоДнейДляРасчетаТекущегоРасхода"));
		Если НЕ ЗначениеЗаполнено(КоличествоДнейДляРасчетаТекущегоРасхода.Значение) Тогда
			КоличествоДнейДляРасчетаТекущегоРасхода.Значение = 90;
		КонецЕсли;
		
		ДатаНеликвидов = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаНеликвидов"));
		Если НЕ ЗначениеЗаполнено(ДатаНеликвидов.Значение) Тогда
			ДатаНеликвидов.Значение = НачалоДня(ДобавитьМесяц(ТекущаяДатаСеанса(), -24));
		КонецЕсли;
		
		ДатаПретендентов = КомпоновщикНастроек.Настройки.ПараметрыДанных.НайтиЗначениеПараметра(Новый ПараметрКомпоновкиДанных("ДатаПретендентов"));
		Если НЕ ЗначениеЗаполнено(ДатаПретендентов.Значение) Тогда
			ДатаПретендентов.Значение = НачалоДня(ДобавитьМесяц(ТекущаяДатаСеанса(), -12));
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры // ЗаполнитьНачальныеНастройки()

#КонецОбласти

#Область ОбработчикиСобытий

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	УстановитьПривилегированныйРежим(Истина);
	
	ОтчетыПлатформаСервер.ВывестиОтчет(ЭтотОбъект, ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка);
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли