
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ВыбранныеПрава = ПолучитьЗначениеПараметраСтруктуры(Параметры, "Права");
	
	ЗаполнениеСпискаПрав();
	
	Если НЕ ВыбранныеПрава = Неопределено Тогда
		УстановленныеПрава = СтрЗаменить(ВыбранныеПрава, "; ", Символы.ПС);
		Для НомерСтроки = 1 По СтрЧислоСтрок(УстановленныеПрава) Цикл
			НайденноеПраво = СписокПрав.НайтиПоЗначению(СтрПолучитьСтроку(УстановленныеПрава, НомерСтроки));
			Если НЕ НайденноеПраво = Неопределено Тогда
				НайденноеПраво.Пометка = Истина;
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Применить(Команда)
	
	Закрыть(ПолучитьВыбранныеПрава());
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаполнениеСпискаПрав()
	
	СписокПрав.Добавить("Чтение", НСтр("ru = 'Чтение'"));
	СписокПрав.Добавить("Добавление", НСтр("ru = 'Добавление'"));
	СписокПрав.Добавить("Изменение", НСтр("ru = 'Изменение'"));
	СписокПрав.Добавить("Удаление", НСтр("ru = 'Удаление'"));
	СписокПрав.Добавить("Просмотр", НСтр("ru = 'Просмотр'"));
	СписокПрав.Добавить("ИнтерактивноеДобавление", НСтр("ru = 'Интерактивное добавление'"));
	СписокПрав.Добавить("Редактирование", НСтр("ru = 'Редактирование'"));
	СписокПрав.Добавить("ИнтерактивнаяПометкаУдаления", НСтр("ru = 'Интерактивная пометка удаления'"));
	СписокПрав.Добавить("ИнтерактивноеСнятиеПометкиУдаления", НСтр("ru = 'Интерактивное снятие пометки удаления'"));
	СписокПрав.Добавить("ИнтерактивноеУдаление", НСтр("ru = 'Интерактивное удаление'"));
	СписокПрав.Добавить("ИнтерактивноеУдалениеПомеченных", НСтр("ru = 'Интерактивное удаление помеченных'"));
	СписокПрав.Добавить("ВводПоСтроке", НСтр("ru = 'Ввод по строке'"));
	СписокПрав.Добавить("Проведение", НСтр("ru = 'Проведение'"));
	СписокПрав.Добавить("ОтменаПроведения", НСтр("ru = 'Отмена проведения'"));
	СписокПрав.Добавить("ИнтерактивноеПроведение", НСтр("ru = 'Интерактивное проведение'"));
	СписокПрав.Добавить("ИнтерактивноеПроведениеНеОперативное", НСтр("ru = 'Интерактивное проведение не оперативное'"));
	СписокПрав.Добавить("ИнтерактивнаяОтменаПроведения", НСтр("ru = 'Интерактивная отмена проведения'"));
	СписокПрав.Добавить("ИнтерактивноеИзменениеПроведенных", НСтр("ru = 'Интерактивное изменение проведенных'"));
	СписокПрав.Добавить("ИнтерактивнаяАктивация", НСтр("ru = 'Интерактивная активация'"));
	СписокПрав.Добавить("ИнтерактивныйСтарт", НСтр("ru = 'Интерактивный старт'"));
	СписокПрав.Добавить("ИнтерактивноеВыполнение",НСтр("ru = 'Интерактивное выполнение'"));
	
КонецПроцедуры

&НаСервере
Функция ПолучитьВыбранныеПрава()
	
	СписокРезультат = "";
	
	Для Каждого ТекущаяСтрока Из СписокПрав Цикл
		Если ТекущаяСтрока.Пометка Тогда
			СписокРезультат = СписокРезультат + "; " + ТекущаяСтрока.Значение;
		КонецЕсли;
	КонецЦикла;
	
	СписокРезультат = Прав(СписокРезультат, СтрДлина(СписокРезультат) - 2);
	
	Возврат СписокРезультат;
	
КонецФункции

#КонецОбласти
