
#Область ОбработчикиСобытий 

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Если НеПроведен(ПараметрКоманды) Тогда
		
		ПоказатьПредупреждение(, СообщениеОНеобходимостиПроведения());
		Возврат;
		
	КонецЕсли;
	
	ПараметрыФормы = Новый Структура("Основание,Команда", ПараметрКоманды, "ОплатитьЧерезКассу");
	ОткрытьФорму(
		"Документ.ЧекНаОплату.ФормаОбъекта",
		ПараметрыФормы,
		ПараметрыВыполненияКоманды.Источник
	);

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция НеПроведен(Документ)
	
	Если НЕ УправлениеДиалогомВызовСервера.ПроведениеРазрешено(Документ) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Возврат Не ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Документ, "Проведен");
	
КонецФункции

&НаКлиенте
Функция СообщениеОНеобходимостиПроведения()
	
	Возврат НСтр("ru = 'Для выполнения оплаты документ должен быть проведен'");
	
КонецФункции

#КонецОбласти
