///////////////////////////////////////////////////////////////////////////////
// Модуль формы "Результат"
//
///////////////////////////////////////////////////////////////////////////////

#Область ОбработчикиСобытийФормы

// Обработчик события возникающего на сервере при создании формы.
//
// Параметры:
//  Отказ                - Булево - Признак отказа от создания формы.
//  СтандартнаяОбработка - Булево - В данный параметр передается признак выполнения системной обработки события.
//
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Заголовок = Параметры.Заголовок;
	
	ГрафикРезультат.АвтоМаксимальноеЗначение = Истина;
	ГрафикРезультат.АвтоМинимальноеЗначение  = Истина;
	ГрафикРезультат.АвтоТранспонирование     = Ложь;
	
	СерияИсходныйРяд   = ГрафикРезультат.Серии[0];
	СерияПолученныйРяд = ГрафикРезультат.Серии[1];
	
	КоличествоПрошлыхПериодов = Параметры.КоличествоПрошлыхПериодов;
	МассивДанных = Параметры.ТекСтрока;
	
	// рисуем исходные данные
	Для Сч=0 По (КоличествоПрошлыхПериодов-1) Цикл
		ГрафикРезультат.УстановитьЗначение(ГрафикРезультат.УстановитьТочку(МассивДанных[Сч].Представление) ,СерияИсходныйРяд,МассивДанных[Сч].СуммаФакт);
	КонецЦикла;
	ГрафикРезультат.УстановитьЗначение(ГрафикРезультат.УстановитьТочку(МассивДанных[КоличествоПрошлыхПериодов].Представление) ,СерияИсходныйРяд, МассивДанных[КоличествоПрошлыхПериодов].СуммаТренд);
	
	// рисуем полученные данные
	Для Сч=0 По (КоличествоПрошлыхПериодов) Цикл
		ГрафикРезультат.УстановитьЗначение(ГрафикРезультат.УстановитьТочку(МассивДанных[Сч].Представление) ,СерияПолученныйРяд, МассивДанных[Сч].СуммаТренд);
	КонецЦикла;
	ГрафикРезультат.АвтоТранспонирование = Истина;
	
КонецПроцедуры // ПриСозданииНаСервере()

#КонецОбласти

