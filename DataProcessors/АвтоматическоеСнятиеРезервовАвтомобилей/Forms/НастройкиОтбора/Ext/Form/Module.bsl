#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ОтборНастроекКомпоновкиДанных = ПолучитьЗначениеПараметраСтруктуры(Параметры, "ОтборНастроекКомпоновкиДанных");
	
	Если ОтборНастроекКомпоновкиДанных = Неопределено Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	СхемаКомпановкиДанных = Обработки.АвтоматическоеСнятиеРезервовАвтомобилей.ПолучитьМакет("ЗаказыСоСроками");
	АдресСхемыКомпановкиДанных = ПоместитьВоВременноеХранилище(СхемаКомпановкиДанных, УникальныйИдентификатор);
	КомпоновщикНастроекКомпоновкиДанных.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(АдресСхемыКомпановкиДанных));
	КомпоновщикНастроекКомпоновкиДанных.ЗагрузитьНастройки(СхемаКомпановкиДанных.НастройкиПоУмолчанию);
	
	Для Каждого ТекущаяСтрока Из ОтборНастроекКомпоновкиДанных.Элементы Цикл
		ЗаполнитьЗначенияСвойств(КомпоновщикНастроекКомпоновкиДанных.Настройки.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных")), ТекущаяСтрока);
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Применить(Команда)
	
	Закрыть(КомпоновщикНастроекКомпоновкиДанных.Настройки.Отбор);
	
КонецПроцедуры

#КонецОбласти
