<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Характеристика</dataPath>
			<field>Характеристика</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Цена</dataPath>
			<field>Цена</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Штрихкод</dataPath>
			<field>Штрихкод</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОстатокНаСкладе</dataPath>
			<field>ОстатокНаСкладе</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Остаток на складе</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЦенниковДляПечати</dataPath>
			<field>КоличествоЦенниковДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество ценников для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоЭтикетокДляПечати</dataPath>
			<field>КоличествоЭтикетокДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество этикеток для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ШаблонЦенникаДляПечати</dataPath>
			<field>ШаблонЦенникаДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Шаблон ценника для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ШаблонЭтикеткиДляПечати</dataPath>
			<field>ШаблонЭтикеткиДляПечати</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Шаблон этикетки для печати</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТекущееВремя</dataPath>
			<field>ТекущееВремя</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущее время</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТекущийПользователь</dataPath>
			<field>ТекущийПользователь</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущий пользователь</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПоследнегоИзмененияЦены</dataPath>
			<field>ДатаПоследнегоИзмененияЦены</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураОписание</dataPath>
			<field>НоменклатураОписание</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура описание</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураНаименованиеПолное</dataPath>
			<field>НоменклатураНаименованиеПолное</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура наименование полное</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЕдиницаИзмерения</dataPath>
			<field>ЕдиницаИзмерения</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СкладКомпании</dataPath>
			<field>СкладКомпании</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Склад компании</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТипЦен</dataPath>
			<field>ТипЦен</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Тип цен</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Весовой</dataPath>
			<field>Весовой</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Весовой</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикиИспользуются</dataPath>
			<field>ХарактеристикиИспользуются</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Характеристики используются</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:required>true</dcscom:required>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаНДС</dataPath>
			<field>СуммаНДС</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма НДС</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтавкаНДС</dataPath>
			<field>СтавкаНДС</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Ставка НДС</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПроизвольныйТекст1</dataPath>
			<field>ПроизвольныйТекст1</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Произвольный текст1</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПроизвольныйТекст2</dataPath>
			<field>ПроизвольныйТекст2</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Произвольный текст2</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПроизвольнаяДата</dataPath>
			<field>ПроизвольнаяДата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Произвольная дата</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВЫБОР
		КОГДА ИсходныеДанные.Номенклатура ССЫЛКА Справочник.ПрочиеАктивы
			ТОГДА ВЫРАЗИТЬ(ИсходныеДанные.Номенклатура КАК Справочник.ПрочиеАктивы)
		ИНАЧЕ ВЫРАЗИТЬ(ИсходныеДанные.Номенклатура КАК Справочник.Номенклатура)
	КОНЕЦ КАК Номенклатура,
	ИсходныеДанные.Характеристика КАК Характеристика,
	ИсходныеДанные.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ИсходныеДанные.Количество КАК Количество,
	"КоличествоЦенников" КАК КоличествоЦенниковДляПечати,
	"КоличествоЭтикеток" КАК КоличествоЭтикетокДляПечати,
	"ШаблонЭтикетки" КАК ШаблонЭтикеткиДляПечати,
	"ШаблонЦенника" КАК ШаблонЦенникаДляПечати,
	ИсходныеДанные.Цена КАК Цена,
	ВЫРАЗИТЬ(ИсходныеДанные.Организация КАК Справочник.Организации) КАК Организация,
	ИсходныеДанные.СуммаНДС КАК СуммаНДС,
	ИсходныеДанные.СтавкаНДС КАК СтавкаНДС,
	ИсходныеДанные.ПроизвольныйТекст1 КАК ПроизвольныйТекст1,
	ИсходныеДанные.ПроизвольныйТекст2 КАК ПроизвольныйТекст2,
	ИсходныеДанные.ПроизвольнаяДата КАК ПроизвольнаяДата,
	ИсходныеДанные.НомерСтроки КАК НомерСтроки
ПОМЕСТИТЬ ИсходныеДанные
ИЗ
	(ВЫБРАТЬ
		ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка) КАК Номенклатура,
		ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка) КАК Характеристика,
		ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка) КАК ЕдиницаИзмерения,
		0 КАК Количество,
		0 КАК Цена,
		ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка) КАК Организация,
		0 КАК СуммаНДС,
		ЗНАЧЕНИЕ(Справочник.СтавкиНДС.ПустаяСсылка) КАК СтавкаНДС,
		"" КАК ПроизвольныйТекст1,
		"" КАК ПроизвольныйТекст2,
		"" КАК ПроизвольнаяДата,
		0 КАК НомерСтроки
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ЗНАЧЕНИЕ(Справочник.ПрочиеАктивы.ПустаяСсылка),
		ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка),
		ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка),
		0,
		0,
		ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка),
		0,
		ЗНАЧЕНИЕ(Справочник.СтавкиНДС.ПустаяСсылка),
		"",
		"",
		"",
		0) КАК ИсходныеДанные

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	ЕдиницаИзмерения
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсходныеДанные.Номенклатура КАК Номенклатура,
	ИсходныеДанные.Характеристика КАК Характеристика,
	ИсходныеДанные.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ИсходныеДанные.Количество КАК Количество,
	ИсходныеДанные.Цена КАК Цена,
	ИсходныеДанные.КоличествоЦенниковДляПечати КАК КоличествоЦенниковДляПечати,
	ИсходныеДанные.КоличествоЭтикетокДляПечати КАК КоличествоЭтикетокДляПечати,
	ИсходныеДанные.ШаблонЭтикеткиДляПечати КАК ШаблонЭтикеткиДляПечати,
	ИсходныеДанные.ШаблонЦенникаДляПечати КАК ШаблонЦенникаДляПечати,
	ИсходныеДанные.Организация КАК Организация,
	ИсходныеДанные.СуммаНДС КАК СуммаНДС,
	ИсходныеДанные.СтавкаНДС КАК СтавкаНДС,
	ИсходныеДанные.ПроизвольныйТекст1 КАК ПроизвольныйТекст1,
	ИсходныеДанные.ПроизвольныйТекст2 КАК ПроизвольныйТекст2,
	ИсходныеДанные.ПроизвольнаяДата КАК ПроизвольнаяДата,
	ИсходныеДанные.НомерСтроки КАК НомерСтроки
ПОМЕСТИТЬ ИсходныеДанныеИзмененные
ИЗ
	ИсходныеДанные КАК ИсходныеДанные

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	ЕдиницаИзмерения
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ИсходныеДанныеИзмененные.Номенклатура КАК Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика КАК Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	Штрихкоды.Штрихкод КАК Штрихкод,
	ИСТИНА КАК НайденПоПолномуСовпадению
ПОМЕСТИТЬ ШтрихкодыНоменклатуры
ИЗ
	ИсходныеДанныеИзмененные КАК ИсходныеДанныеИзмененные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Штрихкоды КАК Штрихкоды
		ПО ИсходныеДанныеИзмененные.Номенклатура = Штрихкоды.Объект
			И (Штрихкоды.ЕдиницаИзмерения = ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка))
			И (Штрихкоды.ХарактеристикаНоменклатуры = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка))
ГДЕ
	НЕ Штрихкоды.Запрет
	И ИсходныеДанныеИзмененные.Номенклатура.ТипНоменклатуры.ИспользованиеШтрихКодов = 1

СГРУППИРОВАТЬ ПО
	ИсходныеДанныеИзмененные.Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения,
	Штрихкоды.Штрихкод

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ИсходныеДанныеИзмененные.Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения,
	Штрихкоды.Штрихкод,
	ИСТИНА
ИЗ
	ИсходныеДанныеИзмененные КАК ИсходныеДанныеИзмененные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Штрихкоды КАК Штрихкоды
		ПО ИсходныеДанныеИзмененные.Номенклатура = Штрихкоды.Объект
			И ИсходныеДанныеИзмененные.ЕдиницаИзмерения = Штрихкоды.ЕдиницаИзмерения
			И (Штрихкоды.ХарактеристикаНоменклатуры = ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка))
ГДЕ
	НЕ Штрихкоды.Запрет
	И ИсходныеДанныеИзмененные.Номенклатура.ТипНоменклатуры.ИспользованиеШтрихКодов = 2

СГРУППИРОВАТЬ ПО
	ИсходныеДанныеИзмененные.Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения,
	Штрихкоды.Штрихкод

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ИсходныеДанныеИзмененные.Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения,
	Штрихкоды.Штрихкод,
	ИСТИНА
ИЗ
	ИсходныеДанныеИзмененные КАК ИсходныеДанныеИзмененные
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Штрихкоды КАК Штрихкоды
		ПО ИсходныеДанныеИзмененные.Номенклатура = Штрихкоды.Объект
			И (Штрихкоды.ЕдиницаИзмерения = ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка))
			И ИсходныеДанныеИзмененные.Характеристика = Штрихкоды.ХарактеристикаНоменклатуры
ГДЕ
	НЕ Штрихкоды.Запрет
	И ИсходныеДанныеИзмененные.Номенклатура.ТипНоменклатуры.ИспользованиеШтрихКодов = 3

СГРУППИРОВАТЬ ПО
	ИсходныеДанныеИзмененные.Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения,
	Штрихкоды.Штрихкод
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Цены.Период КАК Период,
	Цены.ТипЦен КАК ТипЦен,
	Цены.Номенклатура КАК Номенклатура,
	Цены.ХарактеристикаНоменклатуры КАК Характеристика,
	Цены.Цена КАК Цена,
	Цены.ЕдиницаИзмерения КАК ЕдиницаИзмерения
ПОМЕСТИТЬ Цены
ИЗ
	РегистрСведений.Цены КАК Цены
ГДЕ
	Цены.ТипЦен = &amp;ТипЦен
	И Цены.Период &lt;= &amp;ЦеныНаДату
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Цены.Номенклатура КАК Номенклатура,
	Цены.Характеристика КАК Характеристика,
	МАКСИМУМ(Цены.Период) КАК Период
ПОМЕСТИТЬ ТоварыИДаты
ИЗ
	Цены КАК Цены

СГРУППИРОВАТЬ ПО
	Цены.Номенклатура,
	Цены.Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТоварыИДаты.Период КАК Период,
	Цены.ТипЦен КАК ТипЦен,
	ТоварыИДаты.Номенклатура КАК Номенклатура,
	ТоварыИДаты.Характеристика КАК Характеристика,
	Цены.Цена КАК Цена,
	Цены.ЕдиницаИзмерения КАК ЕдиницаИзмерения
ПОМЕСТИТЬ ЦеныНоменклатурыСрезПоследних
ИЗ
	ТоварыИДаты КАК ТоварыИДаты
		ЛЕВОЕ СОЕДИНЕНИЕ Цены КАК Цены
		ПО ТоварыИДаты.Номенклатура = Цены.Номенклатура
			И ТоварыИДаты.Характеристика = Цены.Характеристика
			И ТоварыИДаты.Период = Цены.Период
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсходныеДанныеИзмененные.Номенклатура КАК Номенклатура,
	ИсходныеДанныеИзмененные.Характеристика КАК Характеристика,
	ИсходныеДанныеИзмененные.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	&amp;ТипЦен КАК ТипЦен,
	ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Цена, 0) КАК Цена,
	ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Период, ДАТАВРЕМЯ(1, 1, 1)) КАК ПериодЦены
ПОМЕСТИТЬ ЦеныНоменклатуры
ИЗ
	ИсходныеДанныеИзмененные КАК ИсходныеДанныеИзмененные
		ЛЕВОЕ СОЕДИНЕНИЕ ЦеныНоменклатурыСрезПоследних КАК ЦеныНоменклатурыСрезПоследних
		ПО ИсходныеДанныеИзмененные.Номенклатура = ЦеныНоменклатурыСрезПоследних.Номенклатура
			И ИсходныеДанныеИзмененные.Характеристика = ЦеныНоменклатурыСрезПоследних.Характеристика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ОстаткиТоваровКомпанииОстатки.Номенклатура КАК Номенклатура,
	ОстаткиТоваровКомпанииОстатки.ХарактеристикаНоменклатуры КАК Характеристика,
	ОстаткиТоваровКомпанииОстатки.КоличествоОстаток КАК КоличествоОстаток
ПОМЕСТИТЬ ВТ_ОстаткиТоваров
ИЗ
	РегистрНакопления.ОстаткиТоваровКомпании.Остатки(, {(СкладКомпании).* КАК СкладКомпании, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК Характеристика}) КАК ОстаткиТоваровКомпанииОстатки
{ГДЕ
	ОстаткиТоваровКомпанииОстатки.СкладКомпании.Организация КАК Организация}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВложенныйЗапрос.Номенклатура КАК Номенклатура,
	ВложенныйЗапрос.НоменклатураНаименованиеПолное КАК НоменклатураНаименованиеПолное,
	ВложенныйЗапрос.НоменклатураОписание КАК НоменклатураОписание,
	ВложенныйЗапрос.Характеристика КАК Характеристика,
	ВложенныйЗапрос.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	ВложенныйЗапрос.Количество КАК Количество,
	ВложенныйЗапрос.Весовой КАК Весовой,
	ВложенныйЗапрос.ХарактеристикиИспользуются КАК ХарактеристикиИспользуются,
	ВложенныйЗапрос.КоличествоЦенниковДляПечати КАК КоличествоЦенниковДляПечати,
	ВложенныйЗапрос.КоличествоЭтикетокДляПечати КАК КоличествоЭтикетокДляПечати,
	ВложенныйЗапрос.ШаблонЭтикеткиДляПечати КАК ШаблонЭтикеткиДляПечати,
	ВложенныйЗапрос.ШаблонЦенникаДляПечати КАК ШаблонЦенникаДляПечати,
	ВЫБОР
		КОГДА ВложенныйЗапрос.Штрихкод = НЕОПРЕДЕЛЕНО
			ТОГДА ШтрихкодыНоменклатуры.Штрихкод
		ИНАЧЕ ВложенныйЗапрос.Штрихкод
	КОНЕЦ КАК Штрихкод,
	ВложенныйЗапрос.ТипЦен КАК ТипЦен,
	ВложенныйЗапрос.Организация КАК Организация,
	ВложенныйЗапрос.Цена КАК Цена,
	ВложенныйЗапрос.ДатаПоследнегоИзмененияЦены КАК ДатаПоследнегоИзмененияЦены,
	ВложенныйЗапрос.ТекущееВремя КАК ТекущееВремя,
	ВложенныйЗапрос.ТекущийПользователь КАК ТекущийПользователь,
	ВложенныйЗапрос.ПериодЦены КАК ПериодЦены,
	ВложенныйЗапрос.ОстатокНаСкладе КАК ОстатокНаСкладе,
	ВложенныйЗапрос.СуммаНДС КАК СуммаНДС,
	ВложенныйЗапрос.СтавкаНДС КАК СтавкаНДС,
	ВложенныйЗапрос.ПроизвольныйТекст1 КАК ПроизвольныйТекст1,
	ВложенныйЗапрос.ПроизвольныйТекст2 КАК ПроизвольныйТекст2,
	ВложенныйЗапрос.ПроизвольнаяДата КАК ПроизвольнаяДата
{ВЫБРАТЬ
	Номенклатура.*,
	НоменклатураНаименованиеПолное,
	НоменклатураОписание,
	Характеристика.*,
	ЕдиницаИзмерения.*,
	Весовой,
	ХарактеристикиИспользуются,
	Количество,
	КоличествоЦенниковДляПечати,
	КоличествоЭтикетокДляПечати,
	ШаблонЦенникаДляПечати,
	ШаблонЭтикеткиДляПечати,
	Штрихкод,
	ТипЦен.*,
	Организация.*,
	Цена,
	ДатаПоследнегоИзмененияЦены,
	Количество,
	ТекущееВремя,
	ТекущийПользователь.*,
	ОстатокНаСкладе,
	СуммаНДС,
	СтавкаНДС,
	ПроизвольныйТекст1,
	ПроизвольныйТекст2,
	ПроизвольнаяДата}
ИЗ
	(ВЫБРАТЬ
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)) КАК Номенклатура,
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура ССЫЛКА Справочник.ПрочиеАктивы
				ТОГДА ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.Наименование КАК СТРОКА(1024))
			ИНАЧЕ ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.НаименованиеПолное КАК СТРОКА(1024))
		КОНЕЦ КАК НоменклатураНаименованиеПолное,
		ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.Комментарий КАК СТРОКА(1024)) КАК НоменклатураОписание,
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Характеристика, ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)) КАК Характеристика,
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.ЕдиницаИзмерения, ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка)) КАК ЕдиницаИзмерения,
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура.ТипНоменклатуры.Весовой = ИСТИНА
					И НЕ ИсходныеДанныеПоследнийЗапрос.Номенклатура ССЫЛКА Справочник.ПрочиеАктивы
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ КАК Весовой,
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура.ТипНоменклатуры.ИспользованиеХарактеристик &lt;&gt; 3
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ КАК ХарактеристикиИспользуются,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.Количество) КАК Количество,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.КоличествоЦенниковДляПечати) КАК КоличествоЦенниковДляПечати,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.КоличествоЭтикетокДляПечати) КАК КоличествоЭтикетокДляПечати,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ШаблонЭтикеткиДляПечати) КАК ШаблонЭтикеткиДляПечати,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ШаблонЦенникаДляПечати) КАК ШаблонЦенникаДляПечати,
		ЕСТЬNULL(ШтрихкодыНоменклатуры.Штрихкод, НЕОПРЕДЕЛЕНО) КАК Штрихкод,
		МАКСИМУМ(ТипыЦен.Ссылка) КАК ТипЦен,
		МАКСИМУМ(ЕСТЬNULL(Организации.Ссылка, ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))) КАК Организация,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.Цена) КАК Цена,
		МАКСИМУМ(ЦеныНоменклатуры.ПериодЦены) КАК ДатаПоследнегоИзмененияЦены,
		МАКСИМУМ(&amp;ТекущееВремя) КАК ТекущееВремя,
		МАКСИМУМ(Пользователи.Ссылка) КАК ТекущийПользователь,
		МАКСИМУМ(ЦеныНоменклатуры.ПериодЦены) КАК ПериодЦены,
		МАКСИМУМ(ВТ_ОстаткиТоваров.КоличествоОстаток) КАК ОстатокНаСкладе,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.СуммаНДС) КАК СуммаНДС,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.СтавкаНДС) КАК СтавкаНДС,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ПроизвольныйТекст1) КАК ПроизвольныйТекст1,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ПроизвольныйТекст2) КАК ПроизвольныйТекст2,
		МАКСИМУМ(ИсходныеДанныеПоследнийЗапрос.ПроизвольнаяДата) КАК ПроизвольнаяДата,
		МИНИМУМ(ИсходныеДанныеПоследнийЗапрос.НомерСтроки) КАК НомерСтроки
	{ВЫБРАТЬ
		Количество,
		КоличествоЦенниковДляПечати,
		КоличествоЭтикетокДляПечати,
		ШаблонЭтикеткиДляПечати,
		ШаблонЦенникаДляПечати}
	ИЗ
		ИсходныеДанныеИзмененные КАК ИсходныеДанныеПоследнийЗапрос
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
			ПО ИсходныеДанныеПоследнийЗапрос.Организация.Ссылка = Организации.Ссылка
			ЛЕВОЕ СОЕДИНЕНИЕ ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
			ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ШтрихкодыНоменклатуры.Номенклатура
				И ИсходныеДанныеПоследнийЗапрос.Характеристика = ШтрихкодыНоменклатуры.Характеристика
				И ИсходныеДанныеПоследнийЗапрос.ЕдиницаИзмерения = ШтрихкодыНоменклатуры.ЕдиницаИзмерения
				И (ШтрихкодыНоменклатуры.НайденПоПолномуСовпадению)
			ЛЕВОЕ СОЕДИНЕНИЕ ЦеныНоменклатуры КАК ЦеныНоменклатуры
			ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ЦеныНоменклатуры.Номенклатура
				И ИсходныеДанныеПоследнийЗапрос.Характеристика = ЦеныНоменклатуры.Характеристика
				И ИсходныеДанныеПоследнийЗапрос.ЕдиницаИзмерения = ЦеныНоменклатуры.ЕдиницаИзмерения
				И (ЦеныНоменклатуры.ТипЦен = &amp;ТипЦен)
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ТипыЦен КАК ТипыЦен
			ПО (ТипыЦен.Ссылка = &amp;ТипЦен)
			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Пользователи КАК Пользователи
			ПО (Пользователи.Ссылка = &amp;ТекущийПользователь)
			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОстаткиТоваров КАК ВТ_ОстаткиТоваров
			ПО ИсходныеДанныеПоследнийЗапрос.Номенклатура = ВТ_ОстаткиТоваров.Номенклатура
				И ИсходныеДанныеПоследнийЗапрос.Характеристика = ВТ_ОстаткиТоваров.Характеристика
	
	СГРУППИРОВАТЬ ПО
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка)),
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Номенклатура.Наименование, ""),
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура ССЫЛКА Справочник.ПрочиеАктивы
				ТОГДА ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.Наименование КАК СТРОКА(1024))
			ИНАЧЕ ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.НаименованиеПолное КАК СТРОКА(1024))
		КОНЕЦ,
		ВЫРАЗИТЬ(ИсходныеДанныеПоследнийЗапрос.Номенклатура.Комментарий КАК СТРОКА(1024)),
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.Характеристика, ЗНАЧЕНИЕ(Справочник.ХарактеристикиНоменклатуры.ПустаяСсылка)),
		ЕСТЬNULL(ИсходныеДанныеПоследнийЗапрос.ЕдиницаИзмерения, ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.ПустаяСсылка)),
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура.ТипНоменклатуры.Весовой = ИСТИНА
					И НЕ ИсходныеДанныеПоследнийЗапрос.Номенклатура ССЫЛКА Справочник.ПрочиеАктивы
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ,
		ВЫБОР
			КОГДА ИсходныеДанныеПоследнийЗапрос.Номенклатура.ТипНоменклатуры.ИспользованиеХарактеристик &lt;&gt; 3
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ,
		ЕСТЬNULL(ШтрихкодыНоменклатуры.Штрихкод, НЕОПРЕДЕЛЕНО)) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
		ПО ВложенныйЗапрос.Номенклатура = ШтрихкодыНоменклатуры.Номенклатура
			И ВложенныйЗапрос.Характеристика = ШтрихкодыНоменклатуры.Характеристика
			И ВложенныйЗапрос.ЕдиницаИзмерения = ШтрихкодыНоменклатуры.ЕдиницаИзмерения
			И (НЕ ШтрихкодыНоменклатуры.НайденПоПолномуСовпадению)
{ГДЕ
	ВложенныйЗапрос.Номенклатура.* КАК Номенклатура,
	ВложенныйЗапрос.Характеристика.* КАК Характеристика,
	ВложенныйЗапрос.ЕдиницаИзмерения.* КАК ЕдиницаИзмерения,
	ВложенныйЗапрос.Весовой КАК Весовой,
	ВложенныйЗапрос.ХарактеристикиИспользуются КАК ХарактеристикиИспользуются,
	ВложенныйЗапрос.Штрихкод КАК Штрихкод,
	ВложенныйЗапрос.Цена КАК Цена,
	ВложенныйЗапрос.ПериодЦены КАК ДатаПоследнегоИзмененияЦены,
	ВложенныйЗапрос.ОстатокНаСкладе КАК ОстатокНаСкладе,
	ВложенныйЗапрос.Организация.*,
	ВложенныйЗапрос.СуммаНДС,
	ВложенныйЗапрос.СтавкаНДС,
	ВложенныйЗапрос.ПроизвольныйТекст1,
	ВложенныйЗапрос.ПроизвольныйТекст2,
	ВложенныйЗапрос.ПроизвольнаяДата}

УПОРЯДОЧИТЬ ПО
	ВложенныйЗапрос.НомерСтроки</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<parameter>
		<name>ТекущееВремя</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущее время</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ТекущийПользователь</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущий пользователь</v8:content>
			</v8:item>
		</title>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.Пользователи.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныНаДату</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены на дату</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ЦеныНазначенныеДействующие</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Цены назначенные действующие</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ВидЦен</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Вид цен</v8:content>
			</v8:item>
		</title>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.ВидыЦен.ПустаяСсылка</value>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ТипЦен</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Тип цен</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.ТипыЦен</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Организация</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Организация</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Организации</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>СкладКомпании</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Склад компании</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.СкладыКомпании</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Основной</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.ОсновнаяОрганизация</dcsset:right>
					<dcsset:userSettingID>9e9a83db-9b91-4bcd-9869-c5cd0224079a</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">СкладКомпании</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Штрихкод</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:string"/>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Номенклатура.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура.ЦеноваяГруппа</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ЦеновыеГруппы.ПустаяСсылка</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Штрихкод</dcsset:left>
					<dcsset:comparisonType>Filled</dcsset:comparisonType>
					<dcsset:presentation xsi:type="xs:string">Только со штрихкодом</dcsset:presentation>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ОстатокНаСкладе</dcsset:left>
					<dcsset:comparisonType>Greater</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
					<dcsset:presentation xsi:type="xs:string">Только с остатками на складе</dcsset:presentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>