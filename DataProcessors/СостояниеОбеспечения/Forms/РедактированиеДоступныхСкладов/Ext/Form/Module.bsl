
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	ЗаполнитьСклады();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура УстановитьДоступныеСклады(Команда)
	
	Закрыть(ВыгрузитьСклады());
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Функция ВыгрузитьСклады()
	
	СкладыВрем = Новый Массив;
	
	Для Каждого Строка Из Склады Цикл
		
		Если ЗначениеЗаполнено(Строка.Склад) Тогда
			СкладыВрем.Добавить(Строка.Склад);	
		КонецЕсли;
		
	КонецЦикла;
	
	Возврат Новый ФиксированныйМассив(СкладыВрем);
	
КонецФункции

&НаСервере
Функция ЗаполнитьСклады()
	
	Склады.Очистить();
	
	Для Каждого Склад Из Параметры.ДоступныеСклады Цикл
		
		Склады.Добавить().Склад = Склад;
		
	КонецЦикла;
	
КонецФункции

#КонецОбласти
