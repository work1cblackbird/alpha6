#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Если ТипЗнч(ПараметрКоманды)=Тип("СправочникСсылка.Контрагенты") Тогда
		ПараметрыОтбора = Новый Структура("Контрагент", ПараметрКоманды);
	Иначе
		ПараметрыОтбора = Новый Структура("Контрагент,Договор", КонтрагентДоговора(ПараметрКоманды), ПараметрКоманды);
	КонецЕсли;
	
	ОткрытьФорму(
		"РегистрСведений.Кураторы.ФормаСписка",
		Новый Структура("Отбор,ОтключитьАвтоматическоеСохранениеНастроек", ПараметрыОтбора, Истина),
		ПараметрыВыполненияКоманды.Источник,
		ПараметрыВыполненияКоманды.Уникальность,
		ПараметрыВыполненияКоманды.Окно,
		ПараметрыВыполненияКоманды.НавигационнаяСсылка,
		,
		РежимОткрытияОкнаФормы.Независимый);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция КонтрагентДоговора(Договор)
	
	Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Договор, "Владелец");
	
КонецФункции

#КонецОбласти
