// Модуль менеджера регистра "Порядок закрытия балансовых статей"

#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

#Область ДляВызоваИзДругихПодсистем

#Область ОбновлениеВерсииИБ

// Заполняет начальными данными регистр "Порядок распределения статей доходов и расходов"
//
Процедура ВыполнитьНачальноеЗаполнение() Экспорт
	
	НастройкиПоУмолчанию = РегистрыСведений.ПорядокЗакрытияБалансовыхСтатей.ПолучитьМакет("НастройкиПоУмолчанию");
	
	НаборЗаписей = РегистрыСведений.ПорядокЗакрытияБалансовыхСтатей.СоздатьНаборЗаписей();
	НаборЗаписей.Прочитать();
	НастроенныеСтатьи = НаборЗаписей.ВыгрузитьКолонку("Статья");
	ОписаниеТипаБулево = Новый ОписаниеТипов("Булево");

	Для НомерСтроки = 1 По НастройкиПоУмолчанию.ВысотаТаблицы Цикл
		
		Статья  = Справочники.СтатьиДоходовИРасходов[СокрЛП(НастройкиПоУмолчанию.Область(НомерСтроки, 1).Текст)];
		Порядок = ОписаниеТипаБулево.ПривестиЗначение(СокрЛП(НастройкиПоУмолчанию.Область(НомерСтроки, 2).Текст));
		
		Если НастроенныеСтатьи.Найти(Статья) = Неопределено Тогда
			
			НоваяЗапись = НаборЗаписей.Добавить();
			НоваяЗапись.Статья  = Статья;
			НоваяЗапись.Порядок = Порядок;
			
		КонецЕсли;
		
	КонецЦикла;
	
	Если НаборЗаписей.Модифицированность() Тогда
		
		НаборЗаписей.Записать(Ложь);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецОбласти

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область ПараметрыОбработкиРеквизитовОбъекта

Функция ПолучитьОбязательныеРеквизиты(Объект) Экспорт
	
	ОбязательныеРеквизиты = ОбработкаСобытийРегистраСервер.ПолучитьСтандартныеОбязательныеРеквизиты(Объект);
	
	Возврат ОбязательныеРеквизиты;
	
КонецФункции 

Функция ПолучитьУникальныеРеквизиты(Объект) Экспорт
	
	УникальныеРеквизиты = Новый Структура();
	
	Возврат УникальныеРеквизиты;
	
КонецФункции 

#КонецОбласти

#КонецОбласти

#КонецЕсли