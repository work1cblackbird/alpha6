<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h2>Обмен данными</h2>
<p>Система позволяет выполнять обмен данными между различными информационными базами по правилам обмена с использованием механизма распределенных информационных баз. Правила обмена данными создаются при помощи конфигурации «Конвертация данных, редакция 2.1». Обмен данными может быть односторонним или двухсторонним, выполняться автоматически (по заданному расписанию) или вручную по требованию пользователя. Для обмена данными могут быть использованы различные каналы связи: сетевой каталог, электронная почта или FTP.</p>
<p>Внимание! Для корректной работы программы в клиент-серверном режиме на сервере 1С:Предприятие должен быть разрешен доступ к этим ресурсам. Подробнее см. раздел документации Настройки программы - Настройка доступа к внешним ресурсам на сервере.</p>
<p>Использование функционала обмена данными предполагает два этапа:</p>
<ul><li>настройка обмена данными, выполняется администратором; 
</li><li>выполнение обмена данными, осуществляется опытным пользователем.<br></li></ul><h3>Настройка параметров системы</h3>
<h4>Обмен данными</h4>
<p>Перед использованием обмена данными необходимо в форме Настройки системы на странице Обмен данными установить флажок Использовать обмен данными и установить Префикс узла распределенной информационной базы. Подробнее о префиксе информационной базы смотри раздел руководства «Префиксация».</p>
<p>После сохранения выполненных настроек в системе станет доступен раздел Обмен данными и одноименная команда на панели навигации.<br></p>
<h4>Настройка обмена данными</h4>
<p>Настройка обмена производится по команде Обмен данными на панели навигации раздела Обмен данными.</p>
<p>По команде Создать можно приступить к настройке обмена данными с одной из информационных баз.<br></p>
<h4>Общие рекомендации по настройке обмена</h4>
<p>Топология обмена может быть произвольной. В связи с этим рекомендуется избегать топологий, в которых обмен производится по замкнутому кругу (т.е. база A обменивается с базой B, база B обменивается с базой C, а база C обменивается с базой А), так как это может привести к бесконечным итерациям обмена.</p>
<p>Начать настройку обмена можно в любой из баз. При создании нового обмена данными в первой ИБ необходимо настроить следующие параметры обмена:</p>
<ul><li>Способ обмена данными с заданием настроек транспорта: каталог, электронная почта или FTP. Осуществляется проверка работоспособности выбранного способа обмена; 
</li><li>Ограничения миграции данных между парой обменивающихся ИБ; 
</li><li>Значения по умолчанию для использования при загрузке данных; 
</li><li>Префикс ИБ, если он не был задан ранее.</li></ul><p>При создании обмена данными между узлами распределенной информационной базы, по завершению первого этапа настройки будет предложено создать начальный образ подчиненного узла РИБ. При первом запуске подчиненного узла РИБ (в начале второго этапа настройки) автоматически запустится помощник создания обмена данными. </p>
<p>В случае настройки универсального обмена данными настройки первого этапа сохраняются в файл для использования на втором этапе. В начале второго этапа следует выбрать этот файл с настройками и продолжить создание обмена во второй информационной базе.</p>
<p>На заключительном шаге первого этапа настройки обмена необходимо выполнить начальную выгрузку данных. По завершению настройки будет предложено продолжить обмен данными, осуществив загрузку и выгрузку во второй базе.</p>
<p>Если обмен данными будет производиться с информационной базой, учет в которой не начинался и не настроены параметры учета, то можно предложить следующую методику выполнения первого обмена данными:</p>
<ul><li>В первой ИБ выполнить все необходимые настройки (используя возможности помощника создания обмена данными). 
</li><li>В первой ИБ после завершения первого этапа настройки выполнить начальную выгрузку данных для второй ИБ. 
</li><li>Во второй ИБ продолжить создание обмена. По завершении этапа настройки открыть помощник интерактивного обмена данными (подробнее о помощнике см. далее). 
</li><li>В помощнике интерактивного обмена данными выполнить выборочную загрузку только тех данных, которые необходимы во второй ИБ для настройки параметров учета (например, справочников). Выполнить при необходимости сопоставление объектов. 
</li><li>Во второй ИБ выполнить настройку параметров учета с учётом загруженных данных (например, учетные политики, счета учета номенклатуры и пр.) 
</li><li>Во второй ИБ выполнить загрузку данных, которые не были загружены на первом этапе загрузки (например, документы, регистры и т.д.). При этом повторно формировать сообщение обмена из первой ИБ не требуется. 
</li><li>Во второй ИБ выполнить выгрузку ответного сообщения обмена для первой ИБ (только если сообщение обмена было загружено полностью). 
</li><li>В первой ИБ настроить расписание обмена (подробнее см. далее).</li></ul><p>Загрузка всех данных во второй ИБ может быть выполнена в несколько этапов. Количество этапов зависит от алгоритма настройки параметров учета во второй ИБ. Если выполнять настройку параметров учета во второй ИБ не требуется, то загрузку данных в ней можно выполнить за один раз.</p>
<p>При настройке универсального обмена данными без использования правил обмена, конфигурации обменивающихся информационных баз должны быть идентичны в части структуры данных, которые участвуют в обмене. Обмен данными без использования правил обмена, можно использовать, когда к существующему обмену требуется параллельно добавить дополнительный обмен, «легкими», оперативными данными. Например, в узел требуется оперативно (раз в 15 минут) подгружать информацию остатков по номенклатуре, в то время как саму номенклатуру с ее данными (картинками, характеристиками и пр.) достаточно загружать только раз в сутки.</p>
<p>При настройке обмена данными в клиент-серверном варианте информационной базы необходимо иметь в виду, что обмен данными выполняется на компьютере, на котором установлен сервер 1С:Предприятия. Поэтому необходимо убедиться, что путь каталога обмена информацией доступен для чтения и записи пользователю операционной системы, от имени которого запущен сервер 1С:Предприятия. Если это не так, то требуется дать этому пользователю необходимые права, или выбрать другого пользователя для запуска сервера 1С:Предприятия с необходимыми правами на каталог обмена. </p>
<p>Для организации обмена в клиент-серверном варианте могут потребоваться настройки прокси-сервера на машине с установленным сервером 1С:Предприятие, а в файловом варианте настройки прокси-сервера на рабочем месте (на котором осуществляется обмен). Более подробно о настройках прокси-сервера смотри раздел руководства «Настройка параметров прокси-сервера».</p>
<p><strong>Внимание!</strong> Для корректной работы программы в клиент-серверном режиме на сервере 1С:Предприятие должен быть разрешен доступ ко всем перечисленным ресурсам. Подробнее см. раздел документации Настройки программы - Настройка доступа к внешним ресурсам на сервере.</p>
<p>Система позволяет устанавливать дату запрета загрузки данных. Дата запрета загрузки устанавливается для данных, которые должны редактироваться только в одном узле информационной базы, а также по правилам, которые следуют из требований обмена данными. Дату запрета загрузки данных можно устанавливать как для всех узлов планов обмена, так и для конкретного узла плана обмена. Более подробно см. раздел документации «Даты запрета изменения».</p>
<p>Если для хранения файлов используются тома на диске, то вместе с созданием начального образа автоматически будет создан архив с файлами, хранящимися в томах (необходимо указать папку, в которой архив будет создан). Затем в процессе создания информационной базы подчиненного узла из начального образа в базе-приемнике следует загрузить файлы из этого архива. Для этого необходимо воспользоваться командой Разместить файлы начального образа, в разделе Файлы. В последующих итерациях обмена данными файлы в томах будут участвовать автоматически. Более подробно о работе с файлами см. разделы документации «Работа с файлами», «Присоединяемые файлы». </p>
<p>Обновление конфигурации узла РИБ выполняется по следующей методике. Информация для обновления конфигурации подчиненного узла РИБ поступает вместе с основными данными в сообщении обмена. Т.е. сообщение обмена содержит не только данные, но и информацию обновления конфигурации. Поэтому, такое сообщение следует загружать следующим образом:</p>
<ul><li>В режиме 1С:Предприятия выполнить загрузку сообщения обмена первый раз. При этом будет загружена информация обновления конфигурации. Основные данные загружены не будут. 
</li><li>Обновить конфигурацию узла РИБ либо с помощью штатных средств Конфигуратора (подробнее см. книгу «1С:Предприятие 8.2. Руководство разработчика»), либо с помощью помощника автоматического обновления конфигурации (подробнее см. раздел документации «Обновление конфигурации»). 
</li><li>Запустить ИБ в режиме 1С:Предприятия и выполнить повторную загрузку сообщения обмена. При этом будут загружены основные данные.</li></ul><p>Если необходимо удалить созданную настройку обмена данными, то нужно выполнить следующие действия:</p>
<ul><li>В списке Обмен данными выделить удаляемую настройку и перейти к форме настройки сценариев обмена данными (команда Выполнение обмена данным — Настроить сценарии обмена данными). 
</li><li>В форме настройки сценариев обмена данными исключить удаляемую настройку обмена из всех сценариев обмена данными. 
</li><li>В списке Обмен данными выделить удаляемую настройку и перейти к форме списка узлов плана обмена (команда Все действия - Список узлов плана обмена). 
</li><li>В форме списка узлов плана обмена пометить на удаление элемент, который соответствует удаляемой настройке обмена. 
</li><li>Выполнить процедуру удаления помеченных объектов (см. раздел руководства «Базовая функциональность»). 
</li><li>При необходимости повторить этот сценарий удаления во всех ИБ участвовавших в обмене.<br></li></ul><h3>Обмен данными</h3>
<p>Обмен данными производится в списке Обмен данными, который открывается соответствующей командой на панели навигации в разделе Обмен данными. В списке отображается наименование обмена данными и плана обмена, информация по датам выполненных загрузок и выгрузок, а также по датам успешных загрузок и выгрузок (для наглядности, успешные загрузки и выгрузки отмечаются зеленой пиктограммой, неуспешные - красной).</p>
<p>Система позволяет производить обмен в автоматическом и интерактивном режимах. Рекомендации по использованию автоматического и интерактивного режима даны ниже. <br></p>
<h4>Автоматический обмен данными</h4>
<p>По команде Выполнение обмена данными — Выполнить автоматически откроется форма, в которой можно выполнить обмен в автоматическом режиме. </p>
<p>Обмен выполняется последовательно: сначала выполняется попытка загрузки данных из базы-источника, затем выгрузка данных обратно. По гиперссылке Открыть каталог обмена информацией выполняется переход в каталог обмена, если в качестве способа обмена данными выбран Обмен через локальный или сетевой каталог или Обмен через FTP-ресурс. </p>
<p>По гиперссылке Настроить параметры транспорта сообщений обмена открывается форма для задания и проверки параметров транспорта сообщений обмена.</p>
<p>В форме отображаются статусы загрузки и выгрузки данных с возможностью быстрого перехода в журнал регистрации для диагностики хода выполнения обмена данными.</p>
<p><strong>Внимание!</strong> Для корректной работы программы в клиент-серверном режиме на сервере 1С:Предприятие должен быть разрешен доступ к этому ресурсу. Подробнее см. раздел документации Настройки программы - Настройка доступа к внешним ресурсам на сервере.</p>
<p><strong>Важно!</strong> Если для обмена данными используется COM-соединение, то обмен выполняется за один этап на стороне одной информационной базы.<br></p>
<h4>Интерактивный обмен данными</h4>
<p>По команде Выполнение обмена данными — Выполнить интерактивно откроется помощник интерактивного обмена данными. Помощник интерактивного обмена данными предназначен для выполнения выгрузки и загрузки данных с возможностью предварительного просмотра и сопоставления загружаемых данных. </p>
<p>По команде Автоматическое сопоставление (по умолчанию) выполняется процесс сопоставления объектов. По команде Выполнить сопоставление открывается список для предварительного просмотра загружаемых данных и выполнения сопоставления объектов вручную. </p>
<p>Сопоставленные вручную объекты двух ИБ запоминаются и при выполнении следующего обмена, сопоставляются автоматически. При использовании интерактивного режима загрузки, рекомендуется вначале выполнять автоматическое сопоставление, а затем выполнять сопоставление вручную для объектов, которые не были сопоставлены автоматически. </p>
<p>Выполнять загрузку данных (по соответствующей команде) рекомендуется только после выполнения сопоставления объектов. Если объекты не были сопоставлены, то после загрузки данных будут созданы дубли «не сопоставленных» объектов. </p>
<p>После загрузки данных, по кнопке Далее помощник выполнит выгрузку данных.</p>
<p>На заключительной странице помощника будет предложено настроить выполнение обмена данными автоматически по расписанию. Если же текущий обмен данными уже включен в одно из существующих расписаний выполнения обмена, то данное предложение будет недоступно.</p>
<p>Режим интерактивного обмена данными следует выбирать в том случае, когда до обмена один и тот же объект мог быть введен независимо в обе обменивающиеся ИБ. Например, интерактивный режим обмена следует выбирать для первого обмена данными между ИБ, учет в которых уже ведется. Вероятность существования в таких ИБ одних и тех же объектов очень высока. Интерактивный режим позволит такие объекты сопоставить вручную. </p>
<p>После сопоставления всех совпадающих объектов в информационных базах, обмен между ними можно выполнять в автоматическом режиме (при условии, что далее все объекты будут заводиться только в какой-то одной базе, а в другую будут переноситься обменом). Что бы такие объекты переносились быстрее, рекомендуется увеличивать частоту автоматического обмена данными. </p>
<p>По команде Выполнение обмена данными — Настроить сценарии обмена данными можно настроить расписание обмена. </p>
<p>Используя сценарии обмена, можно разделить процедуру обмена данными на процесс загрузки и выгрузки данных. Для каждого сценария можно использовать индивидуальное расписание. </p>
<p>Система позволяет осуществлять мониторинг событий возникающих в процессе обмена. События, возникающие в процессе загрузки и выгрузки, записываются в журнал регистрации. Журнал регистрации, с отбором по событиям обмена, можно открыть командами Выполнение обмена данными — События загрузки данных, Выполнение обмена данными — События выгрузки данных. Более подробную информацию о работе с журналом регистрации можно посмотреть в разделе руководства «Сервисные возможности».<br></p>
<h3>Роли для обмена данными</h3>
<p>Для работы с обменом данных пользователям необходимо назначить одну или комбинацию из следующих ролей:<br></p>
<table class="MsoNormalTable" cellspacing="0" cellpadding="0" border="1"><tbody><tr><td>
<p class="TextinTable81">Роль</p></td>
<td>
<p class="TextinTable81">Краткое описание</p></td></tr><tr><td>
<p class="TextinTable81"><span class="Interface">Выполнение обменов данными</span> </p></td>
<td>
<p class="TextinTable81">Дает право запускать обмены вручную, осуществлять мониторинг обмена.</p></td></tr><tr><td>
<p class="TextinTable81"><span class="Interface">Добавление и изменение обменов данными</span> </p></td>
<td>
<p class="TextinTable81">Дает следующие права: добавление и изменение обменов данными; включение и отключение обменов данными; изменение префикса информационной базы; интерактивный обмен данными; мониторинг обмена данными.</p></td></tr><tr><td>
<p class="TextinTable81"><span class="Interface">Полные права</span> </p></td>
<td>
<p class="TextinTable81">Полный доступ ко всем операциям. Позволяет также удалять объекты, помеченные на удаление, включать и выключать использование обмена.</p></td></tr></tbody></table><p> </p></body></html>