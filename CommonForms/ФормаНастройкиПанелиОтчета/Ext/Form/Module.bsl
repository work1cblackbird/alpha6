// Модуль формы "Форма настройки панелей отчета"

#Область ОбработчикиСобытийФормы

// Обработчик события возникающего на сервере при создании формы.
//
// Параметры:
//  Отказ                - Булево - Признак отказа от создания формы.
//  СтандартнаяОбработка - Булево - В данный параметр передается признак выполнения системной обработки события.
//
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Не Параметры.Свойство("ВидимостьЭлементов") Тогда
		Возврат;
	КонецЕсли;
	
	ВидимостьЭлементов = Параметры.ВидимостьЭлементов;
	
	Если ВидимостьЭлементов.Свойство("Строки") Тогда
		ДоступностьСтрок = ВидимостьЭлементов.Строки;
	Иначе
		Элементы.ДоступностьСтрок.Видимость = Ложь;
	КонецЕсли;
	
	Если ВидимостьЭлементов.Свойство("Колонки") Тогда
		ДоступностьКолонок = ВидимостьЭлементов.Колонки;
	Иначе
		Элементы.ДоступностьКолонок.Видимость = Ложь;
	КонецЕсли;
	
	Если ВидимостьЭлементов.Свойство("Показатели") Тогда
		ДоступностьПоказателей = ВидимостьЭлементов.Показатели;
	Иначе
		Элементы.ДоступностьПоказателей.Видимость = Ложь;
	КонецЕсли;
	
	Если ВидимостьЭлементов.Свойство("Параметры") Тогда
		ДоступностьПараметров = ВидимостьЭлементов.Параметры;
	Иначе
		Элементы.ДоступностьПараметров.Видимость = Ложь;
	КонецЕсли;
	
	Если Параметры.Свойство("СкрыватьНастройкиПриФормировании") Тогда
		СкрыватьНастройкиПриФормировании = Параметры.СкрыватьНастройкиПриФормировании;
	КонецЕсли;
	
	Если ВидимостьЭлементов.Свойство("Отборы") Тогда
		ДоступностьОтборов = ВидимостьЭлементов.Отборы;
	Иначе
		Элементы.ДоступностьОтборов.Видимость = Ложь;
	КонецЕсли;
	
	Если Параметры.Свойство("НастройкаЭксперт") Тогда
		ДоступностьКраткойФормыНастроек = НЕ Параметры.НастройкаЭксперт;
	КонецЕсли;
	
КонецПроцедуры //ПриСозданииНаСервере()

#КонецОбласти

#Область ОбработчикиКомандФормы

// Обработчик события возникающего на клиенте при выполнении команды "Применить".
//
// Параметры:
//  Команда - КомандаФормы - Команда, в которой возникло данное событие.
//
&НаКлиенте
Процедура Применить(Команда)
	
	Результат = Новый Структура;
	
	Результат.Вставить("Строки",              ДоступностьСтрок);
	Результат.Вставить("Колонки",            ДоступностьКолонок);
	Результат.Вставить("Показатели",          ДоступностьПоказателей);
	Результат.Вставить("Параметры",           ДоступностьПараметров);
	Результат.Вставить("Отборы",              ДоступностьОтборов);
	Результат.Вставить("ЭкспертнаяНастройка", НЕ ДоступностьКраткойФормыНастроек);
	Результат.Вставить("СкрыватьНастройкиПриФормировании", СкрыватьНастройкиПриФормировании);
	
	Закрыть(Результат);
	
КонецПроцедуры //Применить()

#КонецОбласти



