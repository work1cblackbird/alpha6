
// BSLLS:LineLength-off Большое количество перечислений полей в строковом виде

#Область ПрограммныйИнтерфейс

// См. ЗащитаПерсональныхДанныхПереопределяемый.ЗаполнитьСведенияОПерсональныхДанных
Процедура ЗаполнитьСведенияОПерсональныхДанных(ТаблицаСведений) Экспорт
	
	Если ТаблицаСведений.Найти("Справочник.ПодтверждающиеДокументы", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.ПодтверждающиеДокументы";
		НовыеСведения.ПоляРегистрации = "Владелец";
		НовыеСведения.ПоляДоступа     = "ВидПодтверждающегоДокумента,Серия,Номер,ДатаВыдачи,ДатаОкончания,КемВыдан,Наименование";
		НовыеСведения.ОбластьДанных   = "ПаспортныеДанные";
		
	КонецЕсли;
	
	Если ТаблицаСведений.Найти("Справочник.Сотрудники", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Сотрудники";
		НовыеСведения.ПоляРегистрации = "Ссылка";
		НовыеСведения.ПоляДоступа     = "Фамилия,Имя,Отчество,Инициалы,ДатаРождения,ИНН,СтраховойНомерПФР";
		НовыеСведения.ОбластьДанных   = "ЛичныеДанные";
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Сотрудники";
		НовыеСведения.ПоляРегистрации = "Ссылка";
		НовыеСведения.ПоляДоступа  		= "КонтактнаяИнформация.ЗначенияПолей,КонтактнаяИнформация.Представление,"
			+ "КонтактнаяИнформация.Регион,КонтактнаяИнформация.Город,КонтактнаяИнформация.АдресЭП,"
			+ "КонтактнаяИнформация.НомерТелефона,КонтактнаяИнформация.НомерТелефонаБезКодов,КонтактнаяИнформация.Значение";
		НовыеСведения.ОбластьДанных   = "КонтактнаяИнформация";
		
	КонецЕсли;
	
	Если ТаблицаСведений.Найти("Справочник.Контрагенты", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Контрагенты";
		НовыеСведения.ПоляРегистрации = "Ссылка";
		НовыеСведения.ПоляДоступа     = "Наименование,НаименованиеПолное,Фамилия,Имя,Отчество,ДатаРождения,ИНН,Гражданство";
		НовыеСведения.ОбластьДанных   = "ЛичныеДанные";
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Контрагенты";
		НовыеСведения.ПоляРегистрации = "Ссылка";
		НовыеСведения.ПоляДоступа     = "КонтактнаяИнформация.ЗначенияПолей,КонтактнаяИнформация.Представление,"
			+ "КонтактнаяИнформация.Регион,КонтактнаяИнформация.Город,КонтактнаяИнформация.АдресЭП,"
			+ "КонтактнаяИнформация.НомерТелефона,КонтактнаяИнформация.НомерТелефонаБезКодов,КонтактнаяИнформация.Значение";
		НовыеСведения.ОбластьДанных   = "КонтактнаяИнформация";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.ЗаявкаНаАренду";
		Сведения.ПоляРегистрации	= "Заказчик";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты,ОбращениеККлиенту";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.ЗаявкаНаРемонт";
		Сведения.ПоляРегистрации	= "Заказчик";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты,ОбращениеККлиенту";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.РабочийЛист";
		Сведения.ПоляРегистрации	= "Контрагент";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.РабочийЛистКредитногоОтдела";
		Сведения.ПоляРегистрации	= "Клиент";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.РабочийЛистВыкупаАвтомобиля";
		Сведения.ПоляРегистрации	= "Контрагент";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,ОбращениеККлиенту,АдресЭлектроннойПочты";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.РабочийЛистОтделаСтрахования";
		Сведения.ПоляРегистрации	= "Страхователь";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект				= "Документ.СводныйРемонтныйЗаказ";
		Сведения.ПоляРегистрации	= "Заказчик";
		Сведения.ПоляДоступа		= "ПредставлениеТелефона,ПредставлениеТелефонаСтрокой,АдресЭлектроннойПочты";
		Сведения.ОбластьДанных		= "ЛичныеДанные";
		
	КонецЕсли;
	
КонецПроцедуры

// См. ЗащитаПерсональныхДанныхПереопределяемый.ЗаполнитьОбластиПерсональныхДанных
Процедура ЗаполнитьОбластиПерсональныхДанных(ОбластиПерсональныхДанных) Экспорт
	
	Если ОбластиПерсональныхДанных.Найти("ЛичныеДанные", "Имя") = Неопределено Тогда
		НоваяОбласть = ОбластиПерсональныхДанных.Добавить();
		НоваяОбласть.Имя           = "ЛичныеДанные";
		НоваяОбласть.Представление = НСтр("ru = 'Личные данные'");
	КонецЕсли;
	
	Если ОбластиПерсональныхДанных.Найти("ПаспортныеДанные", "Имя") = Неопределено Тогда
		НоваяОбласть = ОбластиПерсональныхДанных.Добавить();
		НоваяОбласть.Имя           = "ПаспортныеДанные";
		НоваяОбласть.Представление = НСтр("ru = 'Паспортные данные'");
		НоваяОбласть.Родитель      = "ЛичныеДанные";
	КонецЕсли;
	
	Если ОбластиПерсональныхДанных.Найти("КонтактнаяИнформация", "Имя") = Неопределено Тогда
		НоваяОбласть = ОбластиПерсональныхДанных.Добавить();
		НоваяОбласть.Имя           = "КонтактнаяИнформация";
		НоваяОбласть.Представление = НСтр("ru = 'Адреса и телефоны'");
		НоваяОбласть.Родитель      = "ЛичныеДанные";
	КонецЕсли;
	
КонецПроцедуры

// См. ЗащитаПерсональныхДанныхПереопределяемый.ДополнитьДанныеСубъектовПерсональныхДанных
Процедура ДополнитьДанныеСубъектовПерсональныхДанных(СубъектыПерсональныхДанных, ДатаАктуальности) Экспорт
	
	Для Каждого СтрокаСубъект Из СубъектыПерсональныхДанных Цикл
		
		Если НЕ СтрокаСубъект.Субъект.ЭтоГруппа Тогда
			
			Если ТипЗнч(СтрокаСубъект.Субъект) = Тип("СправочникСсылка.Сотрудники") Тогда
				
				СтрокаСубъект.ФИО              = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(СтрокаСубъект.Субъект, "Наименование");
				СтрокаСубъект.Адрес            = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(СтрокаСубъект.Субъект, Справочники.ВидыКонтактнойИнформации.ФактАдресСотрудника);
				СтрокаСубъект.ПаспортныеДанные = Справочники.ПодтверждающиеДокументы.ПолучитьПодтверждающийДокументОбъектаПоВиду(СтрокаСубъект.Субъект);
	
			ИначеЕсли ТипЗнч(СтрокаСубъект.Субъект) = Тип("СправочникСсылка.Контрагенты") Тогда
				
				СтрокаСубъект.ФИО              = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(СтрокаСубъект.Субъект, "Наименование");
				СтрокаСубъект.Адрес            = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(СтрокаСубъект.Субъект, Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента, ТекущаяДатаСеанса());
				СтрокаСубъект.ПаспортныеДанные = Справочники.ПодтверждающиеДокументы.ПолучитьПодтверждающийДокументОбъектаПоВиду(СтрокаСубъект.Субъект);
				
			КонецЕсли;
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

// См. ЗащитаПерсональныхДанныхПереопределяемый.ДополнитьДанныеОрганизацииОператораПерсональныхДанных
Процедура ДополнитьДанныеОрганизацииОператораПерсональныхДанных(Организация, ДанныеОрганизации, ДатаАктуальности) Экспорт
	
	ДанныеОрганизации.Вставить("АдресОрганизации", УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(Организация, Справочники.ВидыКонтактнойИнформации.ЮрАдресОрганизации, ТекущаяДатаСеанса()));
	
	СтруктураСведений = РегистрыСведений.СведенияКомпании.ПолучитьПоследнее(ДатаАктуальности, Новый Структура("Организация,Объект", Организация, Перечисления.ВидыОбъектовСведений.Руководитель));
	
	Если НЕ СтруктураСведений = Неопределено Тогда 
		ДанныеОрганизации.Вставить("ОтветственныйЗаОбработкуПерсональныхДанных", СтруктураСведений.Значение);
	КонецЕсли;
	
КонецПроцедуры

// См. ЗащитаПерсональныхДанныхПереопределяемый.ЗаполнитьФИОФизическогоЛица
Процедура ЗаполнитьФИОФизическогоЛица(ФизическоеЛицо, ФИО) Экспорт
	
	ФИО = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ФизическоеЛицо, "Наименование");
	
КонецПроцедуры

// См. ЗащитаПерсональныхДанныхПереопределяемый.ПриЗаполненииСведенийОбУничтожаемыхПерсональныхДанных
Процедура ПриЗаполненииСведенийОбУничтожаемыхПерсональныхДанных(ТаблицаСведений) Экспорт
	
	Если ТаблицаСведений.Найти("Справочник.ПодтверждающиеДокументы", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.ПодтверждающиеДокументы";
		НовыеСведения.ПолеСубъект     = "Владелец";
		НовыеСведения.КатегорияДанных = "ПаспортныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Наименование");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.ВидПодтверждающегоДокумента");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.Серия");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.Номер");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.ДатаВыдачи");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.ДатаОкончания");
		МассивПолей.Добавить("Справочник.ПодтверждающиеДокументы.Реквизит.КемВыдан");
		НовыеСведения.Поля = МассивПолей;
		
	КонецЕсли;
	
	Если ТаблицаСведений.Найти("Справочник.Сотрудники", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Сотрудники";
		НовыеСведения.ПолеСубъект     = "Ссылка";
		НовыеСведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Наименование");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.Фамилия");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.Имя");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.Отчество");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.Инициалы");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.ДатаРождения");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.ИНН");
		МассивПолей.Добавить("Справочник.Сотрудники.Реквизит.СтраховойНомерПФР");
		НовыеСведения.Поля = МассивПолей;
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Сотрудники";
		НовыеСведения.ПолеСубъект     = "Ссылка";
		НовыеСведения.КатегорияДанных = "КонтактнаяИнформация";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.ЗначенияПолей");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Представление");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Регион");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Город");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.АдресЭП");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.НомерТелефона");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.НомерТелефонаБезКодов");
		МассивПолей.Добавить("Справочник.Сотрудники.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Значение");
		НовыеСведения.Поля = МассивПолей;
		
	КонецЕсли;
	
	Если ТаблицаСведений.Найти("Справочник.Контрагенты", "Объект") = Неопределено Тогда
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Контрагенты";
		НовыеСведения.ПолеСубъект     = "Ссылка";
		НовыеСведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Наименование");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.НаименованиеПолное");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.Фамилия");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.Имя");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.Отчество");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.ДатаРождения");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.ИНН");
		МассивПолей.Добавить("Справочник.Контрагенты.Реквизит.Гражданство");
		НовыеСведения.Поля = МассивПолей;
		
		НовыеСведения = ТаблицаСведений.Добавить();
		НовыеСведения.Объект          = "Справочник.Контрагенты";
		НовыеСведения.ПолеСубъект     = "Ссылка";
		НовыеСведения.КатегорияДанных = "КонтактнаяИнформация";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.ЗначенияПолей");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Представление");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Регион");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Город");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.АдресЭП");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.НомерТелефона");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.НомерТелефонаБезКодов");
		МассивПолей.Добавить("Справочник.Контрагенты.ТабличнаяЧасть.КонтактнаяИнформация.Реквизит.Значение");
		НовыеСведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.ЗаявкаНаАренду";
		Сведения.ПолеСубъект     = "Заказчик";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.ЗаявкаНаАренду.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.ЗаявкаНаАренду.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.ЗаявкаНаАренду.Реквизит.АдресЭлектроннойПочты");
		МассивПолей.Добавить("Документ.ЗаявкаНаАренду.Реквизит.ОбращениеККлиенту");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.ЗаявкаНаРемонт";
		Сведения.ПолеСубъект     = "Заказчик";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.ЗаявкаНаРемонт.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.ЗаявкаНаРемонт.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.ЗаявкаНаРемонт.Реквизит.АдресЭлектроннойПочты");
		МассивПолей.Добавить("Документ.ЗаявкаНаРемонт.Реквизит.ОбращениеККлиенту");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.РабочийЛист";
		Сведения.ПолеСубъект     = "Контрагент";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.РабочийЛист.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.РабочийЛист.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.РабочийЛист.Реквизит.АдресЭлектроннойПочты");
		МассивПолей.Добавить("Документ.РабочийЛист.Реквизит.ОбращениеККлиенту");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.РабочийЛистКредитногоОтдела";
		Сведения.ПолеСубъект     = "Клиент";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.РабочийЛистКредитногоОтдела.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.РабочийЛистКредитногоОтдела.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.РабочийЛистКредитногоОтдела.Реквизит.АдресЭлектроннойПочты");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.РабочийЛистВыкупаАвтомобиля";
		Сведения.ПолеСубъект     = "Контрагент";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.РабочийЛистВыкупаАвтомобиля.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.РабочийЛистВыкупаАвтомобиля.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.РабочийЛистВыкупаАвтомобиля.Реквизит.АдресЭлектроннойПочты");
		МассивПолей.Добавить("Документ.РабочийЛистВыкупаАвтомобиля.Реквизит.ОбращениеККлиенту");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.РабочийЛистОтделаСтрахования";
		Сведения.ПолеСубъект     = "Страхователь";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.РабочийЛистОтделаСтрахования.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.РабочийЛистОтделаСтрахования.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.РабочийЛистОтделаСтрахования.Реквизит.АдресЭлектроннойПочты");
		Сведения.Поля = МассивПолей;
		
		Сведения = ТаблицаСведений.Добавить();
		Сведения.Объект          = "Документ.СводныйРемонтныйЗаказ";
		Сведения.ПолеСубъект     = "Заказчик";
		Сведения.КатегорияДанных = "ЛичныеДанные";
		МассивПолей = Новый Массив;
		МассивПолей.Добавить("Документ.СводныйРемонтныйЗаказ.Реквизит.ПредставлениеТелефона");
		МассивПолей.Добавить("Документ.СводныйРемонтныйЗаказ.Реквизит.ПредставлениеТелефонаСтрокой");
		МассивПолей.Добавить("Документ.СводныйРемонтныйЗаказ.Реквизит.АдресЭлектроннойПочты");
		Сведения.Поля = МассивПолей;
		
	КонецЕсли;
	
КонецПроцедуры


// Изменения при открытии формы документа "Отзыв согласия на обработку персональных данных"
//
// Параметры:
//  Форма - ФормаКлиентскогоПриложения - Форма, для которой выполняется событие.
//
Процедура ФормаДокументаОтзывСогласияПриСозданииНаСервере(Форма) Экспорт
	
	Если Форма.Параметры.Ключ.Пустая() Тогда
		Если НЕ ЗначениеЗаполнено(Форма.Объект.ПодразделениеКомпании) Тогда
			Если Форма.Параметры.Свойство("ПодразделениеКомпании") Тогда
				Форма.Объект.ПодразделениеКомпании = Форма.Параметры.ПодразделениеКомпании;
			Иначе
				Форма.Объект.ПодразделениеКомпании = ПараметрыСеанса.ПодразделениеКомпании;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
	// Выведем на форму реквизит "Подразделение компании"
	ДобавитьПолеФормыПодразделениеКомпании(Форма);
	
КонецПроцедуры

// Изменения при открытии формы списка "Отзыв согласия на обработку персональных данных"
//
// Параметры:
//  Форма - ФормаКлиентскогоПриложения - Форма, для которой выполняется событие.
//
Процедура ФормаСпискаОтзывСогласияПриСозданииНаСервере(Форма) Экспорт
	
	// Вывод подразделения на форме списка
	ДобавитьКолонкуПодразделениеКомпанииВСписок(Форма);
	
КонецПроцедуры

// Изменения при открытии формы документа "Согласия на обработку персональных данных"
//
// Параметры:
//  Форма - ФормаКлиентскогоПриложения - Форма, для которой выполняется событие.
//
Процедура ФормаДокументаСогласияПриСозданииНаСервере(Форма) Экспорт
	
	Если Форма.Параметры.Ключ.Пустая() 
		И НЕ Форма.Параметры.Свойство("ПодразделениеКомпании", Форма.Объект.ПодразделениеКомпании) Тогда
		Форма.Объект.ПодразделениеКомпании = ПараметрыСеанса.ПодразделениеКомпании;
	КонецЕсли;
	
	// Выведем на форму реквизит "Подразделение компании"
	ДобавитьПолеФормыПодразделениеКомпании(Форма);
	
КонецПроцедуры

// Изменения при открытии формы списка "Согласия на обработку персональных данных"
//
// Параметры:
//  Форма - ФормаКлиентскогоПриложения - Форма, для которой выполняется событие.
//
Процедура ФормаСпискаСогласияПриСозданииНаСервере(Форма) Экспорт
	
	// Вывод подразделения на форме списка
	ДобавитьКолонкуПодразделениеКомпанииВСписок(Форма);
	
КонецПроцедуры

// Изменения при открытии журнала формы списка "Согласия на обработку персональных данных"
//
// Параметры:
//  Форма - ФормаКлиентскогоПриложения - Форма, для которой выполняется событие.
//
Процедура ФормаСпискаЖурналаСогласияПриСозданииНаСервере(Форма) Экспорт
	
	// Вывод подразделения на форме списка
	ДобавитьКолонкуПодразделениеКомпанииВСписок(Форма);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ДобавитьПолеФормыПодразделениеКомпании(Форма)
	
	ГруппаЭлементов = Форма.Элементы["ОрганизацияАдресГруппа"];
	ЭлементЮридическийАдресОрганизации = Форма.Элементы["ЮридическийАдресОрганизации"];
	НовыйЭлемент = Форма.Элементы.Вставить(
		"ПодразделениеКомпании",
		Тип("ПолеФормы"),
		ГруппаЭлементов,
		ЭлементЮридическийАдресОрганизации
	);
	НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
	НовыйЭлемент.ПутьКДанным = "Объект.ПодразделениеКомпании";
	СвязиПараметровВыбора = Новый Массив;
	СвязиПараметровВыбора.Добавить(Новый СвязьПараметраВыбора("Отбор.Организация", "Объект.Организация"));
	НовыйЭлемент.СвязиПараметровВыбора = Новый ФиксированныйМассив(СвязиПараметровВыбора);
	НовыйЭлемент.УстановитьДействие("ПриИзменении", "Подключаемый_ПодразделениеКомпанииПриИзменении");
	
КонецПроцедуры

Процедура ДобавитьКолонкуПодразделениеКомпанииВСписок(Форма)
	
	НовыйЭлемент = Форма.Элементы.Вставить(
		"ПодразделениеКомпании",
		Тип("ПолеФормы"),
		Форма.Элементы.Список,
		Форма.Элементы.Субъект
	);
	НовыйЭлемент.Вид = ВидПоляФормы.ПолеНадписи;
	НовыйЭлемент.ПутьКДанным = "Список.ПодразделениеКомпании";
	
КонецПроцедуры

#КонецОбласти
