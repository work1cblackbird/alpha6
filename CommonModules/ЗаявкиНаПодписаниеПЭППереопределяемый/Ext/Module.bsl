
#Область ПрограммныйИнтерфейс

// Метаданные регламентного задания обновить статус заявок на подпись.
// 
// Возвращаемое значение:
//  ОбъектМетаданныхРегламентноеЗадание -  Метаданные регламентного задания обновить статус заявок на подпись
Функция МетаданныеРегламентногоЗаданияОбновитьСтатусЗаявокНаПодпись() Экспорт
	
	Возврат Метаданные.РегламентныеЗадания.ОбновитьСтатусЗаявокНаПодпись;
	
КонецФункции

// См. ЗаявкиНаПодписаниеПЭП.ПриСозданииНаСервере_ФормаДокумента
Процедура ПриСозданииНаСервере_ФормаДокумента(Форма, Отказ, СтандартнаяОбработка) Экспорт
	
	КритерииВыбора = УчастникиПЭППереопределяемый.КритерииВыбораУчастника(Форма.Объект.ФизическоеЛицоПЭП);
	
	Если Не ЗначениеЗаполнено(Форма.Объект.Ссылка) Тогда
		
		Если ЗначениеЗаполнено(Форма.Объект.ФизическоеЛицоПЭП)
			И ТипЗнч(Форма.Объект.ФизическоеЛицоПЭП) = Тип("СправочникСсылка.Контрагенты")
			И КритерииВыбора.ФормаСобственности
				.НайтиПоЗначению(Форма.Объект.ФизическоеЛицоПЭП.ФормаСобственности) = Неопределено Тогда
			
			ОбщегоНазначенияКлиентСервер.СообщитьПользователю(
				НСтр("ru = 'Указанный контрагент в документе не является частным лицом. Создание заявки на подпись отменено.'"),,,,
				Отказ);
			
		КонецЕсли;
		
	КонецЕсли;
	
	Для Каждого КритерийВыбора Из КритерииВыбора Цикл
		
		УправлениеДиалогомСервер.ОбновитьПараметрВыбора(
			Форма.Элементы.ФизическоеЛицоПЭП.ПараметрыВыбора,
			СтрШаблон("Отбор.%1", КритерийВыбора.Ключ),
			КритерийВыбора.Значение);
		
	КонецЦикла;
	
КонецПроцедуры // ПриСозданииНаСервере_ФормаДокумента()

#КонецОбласти
