<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html;charset=utf-8" http-equiv="content-type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10570.1001"></meta></head><body>
<h1><font color="#000080">Справочник "Значимые события"</font></h1>
<h3>Назначение</h3>
<p class="Usual">Справочник является основным элементом в блоке "События". Назначение этого блока - обработка различных событий от прикладных объектов конфигурации. В справочнике "Значимые события" описывается вид объекта (Источник события), события которого необходимо обрабатывать, вид события (Событие), а также условия для обработки этого события. При наступлении некоторого события от прикладного объекта (например, запись документа "Реализация") производится поиск подходящего элемента справочника "Значимые события". Для рассматриваемого выше примера, будет произведен поиск элементов, у которых в качестве источника события выбрано "Документ.Реализация", а вид события - "ПриЗаписи". После нахождения нужных элементов, производится проверка условий, накладываемых на источник события. Например, если необходимо обрабатывать событие записи документов "Реализация" только определенного автора, то это можно указать в условиях. Если проверка условий пройдена, то далее начинается выполнение необходимых действий (создание объектов, отправка электронного письма и т.д.). Выполняемые действия описываются в элементах подчиненного справочника <a href="Catalog.ДействияНаЗначимыеСобытия/Help">«Действия на значимое событие»</a>.</p>
<p class="Usual">В качестве источника события может выступать любой вид объектов, присутствующий в подписках на событие (например, "Справочник.Номенклатура", "Документ.Реализация" и т.д.). Источником события может выступать класс объектов целиком. Например "Документы", "Справочники", "Константы" и т.д.</p>
<p class="Usual">После выбора источника события необходимо выбрать вид события, который жестко связан с видом источника события. </p>
<p class="Usual">Действия, выполняемые после проверки условий,  выполняются в строго определенном порядке. Предусмотрено несколько режимов выполнения действий:</p>
<ol><li>
<div>Выполнять действия в транзакции - все действия значимого события выполняются в рамках одной транзакции. Если в одном из действий произойдет ошибка, то транзакция будет отменена.</div>
</li>
<li>
<div>В случае исключения прерывать выполнение - в случае возникновения ошибки в одном из действий, дальнейшие действия выполнятся не будут. Однако, результат работы предыдущих действий отменен не будет.</div>
</li>
<li>
<div>В случае исключения продолжить выполнение - в случае возникновения ошибки в одном из действий, это действие будет проигнорировано, а выполнение действий продолжится.</div></li></ol><p class="Usual">Предусмотрено два вида условий, накладываемых на значения реквизитов источника события:</p>
<ol><li>
<div>Простое условие - условие накладывается на конкретный реквизит источника события, а также на реквизиты "доступные через точку".  В этом случае необходимо выбрать нужный реквизит, указать вид сравнения и задать значение сравнения. Список возможных видов сравнения зависит от типа значения выбранного реквизита источника события. Например, для реквизитов ссылочного типа допустимо только сравнение вида "равно" и "не равно".  Возможно накладывать ограничения на реквизиты табличных частей источника, если таковые имеются. В этом случае условие будет истинным, если в табличной части присутствуют хотя бы одна строка, удовлетворяющая наложенным ограничениям.</div>
</li>
<li>
<div>Произвольное условие - условие описывается текстом (код на языке 1С), в котором обязательно должна присутствовать переменная "Результат" булевого типа. В этом случае, проверка условия сводится к выполнению кода и анализированию значения переменной "Результат". Если в результате выполнения кода возникла ошибка, либо в тексте кода не будет присутствовать переменная "Результат", либо значение этой переменной будет не булевого типа, то это условие будет проигнорировано. Если в условии необходимо обратиться к реквизитам объекта источника, то необходимо использовать предопределенную переменную "Объект".</div></li></ol><p>Элемент справочника "Значимые события" может содержать произвольное количество условий различных видов. Все условия объединяются логикой "И" (кроме игнорируемых условий. См. выше). </p>
<p class="Usual"></p>
<h3>Параметры</h3>
<p class="Usual">Длина кода: 9, тип кода:Строка.</p>
<p class="Usual">Длина наименования: 100.</p>
<p class="Usual">Иерархический.</p>
<p></p>
<h3>Реквизиты</h3>
<ul><li><strong><font color="#800000">Источник</font></strong>. Тип значения: «Строка». Реквизит является обязательным для заполнения. Полный путь к объекту метаданных, событие которого обрабатывается. 
</li>
<li><strong><font color="#800000">Событие</font></strong>. Тип значения: «Строка». Реквизит является обязательным для заполнения. Обрабатываемое событие. 
</li>
<li><strong>Режим выполнения</strong>. Значение перечисления «Вид действия на значимое событие». Определяет режим выполнения действий. 
</li>
<li><strong>Обрабатывать событие только для новых объектов</strong>. Тип значения: «Булево». Флаг определяющий , что данное событие будет выполняться  только если объект источник новый объект. 
</li>
<li><strong>Активность.</strong> Тип значения: «Булево». Флаг определяющий , что данное событие будет или не будет выполняться.</li></ul><h3>Табличная часть «Условия»</h3>
<ul><li><strong>Вид условия</strong>. Тип значения: «Булево». Флаг определяющий вид условия: простое(ложь) или произвольное(истина). 
</li>
<li><strong>Представление</strong>. Тип значения: «Строка». Путь к реквизиту источника события (например, "Контрагент.Наименование" и т.д.), либо содержит код произвольного условия. 
</li>
<li><strong>Тип сравнения</strong>. Значение перечисления «Вид сравнения»<font color="#0000ff">.</font> 
</li>
<li><strong>Значение сравнения</strong>. Значение сравнения. Тип значения зависит от типа выбранного реквизита источника события. </li></ul><h3>Табличная часть «Действия»</h3>
<p class="Usual">Табличная часть содержит действия, выполняемые при наступлении события (элементы справочника <a href="Catalog.ДействияНаЗначимыеСобытия/Help">«Действия на значимое событие»</a>).</p>
<h3></h3>
<h3>Формы</h3>
<ul><li><strong>Форма списка</strong>. Основная форма списка и выбора. Используется для отображения списка или выбора элементов. 
</li>
<li><strong>Форма элемента</strong>. Основная форма объекта. Используется для заполнения обязательных реквизитов. 
</li>
<li><strong>Форма группы</strong>. Основная форма группы. Используется для заполнения обязательных реквизитов группы. 
</li>
<li><strong>Выбор источника</strong>. Форма для выбора вида источника события.   
</li>
<li><strong>Выбор строки дерева доступных полей</strong>. Форма для выбора реквизита источника события, на которое  нужно наложить ограничение.   
</li>
<li><strong>Редактирование текста условия</strong>. Форма для редактирования кода произвольного условия.  </li></ul><p></p>
<p></p>
<h3>Способ вызова</h3>
<p class="Usual">Вызывается из меню <font color="#800000">"Справочники --&gt; Значимые события".</font></p>
<p></p>
<h3> </h3></body></html>